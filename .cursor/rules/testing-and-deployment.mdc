---
globs: *.test.ts,*.test.tsx,*.test.java,*.yml,*.yaml,Dockerfile,docker-compose*.yml
description: í…ŒìŠ¤íŒ… ì „ëµ ë° ë°°í¬ ê°€ì´ë“œë¼ì¸
---

# í…ŒìŠ¤íŒ… ë° ë°°í¬ ê°€ì´ë“œë¼ì¸

## ğŸ§ª í…ŒìŠ¤íŒ… ì „ëµ

### í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ
1. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (70%)**: ê°œë³„ í•¨ìˆ˜/ë©”ì„œë“œ í…ŒìŠ¤íŠ¸
2. **í†µí•© í…ŒìŠ¤íŠ¸ (20%)**: ì»´í¬ë„ŒíŠ¸ ê°„ ìƒí˜¸ì‘ìš© í…ŒìŠ¤íŠ¸  
3. **E2E í…ŒìŠ¤íŠ¸ (10%)**: ì „ì²´ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

### ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸

#### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (JUnit 5)
```java
@ExtendWith(MockitoExtension.class)
class PermissionServiceTest {
    
    @Mock
    private PermissionRepository permissionRepository;
    
    @InjectMocks
    private PermissionService permissionService;
    
    @Test
    void shouldGrantPermissionWhenUserIsGroupMember() {
        // given, when, then
    }
}
```

#### í†µí•© í…ŒìŠ¤íŠ¸ (TestContainers)
```java
@SpringBootTest
@Testcontainers
class UnifiedContentControllerIntegrationTest {
    
    @Container
    static MySQLContainer<?> mysql = new MySQLContainer<>("mysql:8.0");
    
    @Test
    void shouldCreateUnifiedContent() {
        // ì‹¤ì œ DBì™€ ì—°ë™ëœ í†µí•© í…ŒìŠ¤íŠ¸
    }
}
```

### í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸

#### ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ (Jest + Testing Library)
```tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { ServiceCard } from './ServiceCard';

describe('ServiceCard', () => {
  it('should display service information correctly', () => {
    const mockService = {
      serviceId: 1,
      serviceName: 'Test Service',
      status: 'ACTIVE'
    };
    
    render(<ServiceCard service={mockService} />);
    expect(screen.getByText('Test Service')).toBeInTheDocument();
  });
});
```

#### E2E í…ŒìŠ¤íŠ¸ (Playwright)
```typescript
import { test, expect } from '@playwright/test';

test('unified admin login and service management', async ({ page }) => {
  await page.goto('/login');
  await page.fill('[data-testid=username]', 'admin@test.com');
  await page.fill('[data-testid=password]', 'password');
  await page.click('[data-testid=login-button]');
  
  await expect(page.locator('[data-testid=service-list]')).toBeVisible();
});
```

## ğŸš€ ë°°í¬ ì „ëµ

### Docker ì»¨í…Œì´ë„ˆí™”

#### ë°±ì—”ë“œ Dockerfile
```dockerfile
FROM openjdk:17-jdk-slim
COPY target/unified-cms-api.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

#### í”„ë¡ íŠ¸ì—”ë“œ Dockerfile
```dockerfile
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

FROM node:18-alpine AS runner
WORKDIR /app
COPY --from=builder /app/node_modules ./node_modules
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
```

### Docker Compose ê°œë°œ í™˜ê²½

```yaml
version: "3.8"
services:
  unified-api:
    build: ./server
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=dev
      - DB_HOST=unified-db
    depends_on:
      - unified-db
      - redis

  unified-frontend:
    build: ./client
    ports:
      - "3000:3000"
    environment:
      - NEXT_PUBLIC_API_URL=http://localhost:8080
    depends_on:
      - unified-api

  unified-db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: unified_cms
    ports:
      - "3306:3306"
    volumes:
      - unified_db_data:/var/lib/mysql

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
```

### CI/CD íŒŒì´í”„ë¼ì¸ (GitHub Actions)

```yaml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          
      - name: Run backend tests
        run: ./mvnw test
        
      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          
      - name: Run frontend tests
        run: |
          npm ci
          npm run test
          npm run build

  deploy:
    needs: test
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to production
        run: |
          docker-compose -f docker-compose.prod.yml up -d
```

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”íŠ¸ë¦­
- **Micrometer + Prometheus**: ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- **Grafana**: ëŒ€ì‹œë³´ë“œ ì‹œê°í™”
- **ELK Stack**: ë¡œê·¸ ìˆ˜ì§‘ ë° ë¶„ì„

### í—¬ìŠ¤ì²´í¬ ì„¤ì •
```yaml
# docker-compose.yml
healthcheck:
  test: ["CMD", "curl", "-f", "http://localhost:8080/api/health"]
  interval: 30s
  timeout: 10s
  retries: 3
```

ìì„¸í•œ í…ŒìŠ¤íŒ… ì „ëµì€ [10-unified-cms-testing-performance.md](mdc:.cursor/docs/v2/10-unified-cms-testing-performance.md)ë¥¼,
ë°°í¬ ê°€ì´ë“œëŠ” [08-unified-cms-deployment-guide.md](mdc:.cursor/docs/v2/08-unified-cms-deployment-guide.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.