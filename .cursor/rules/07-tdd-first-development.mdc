---
description: TDD ì‹¬í™” ê°€ì´ë“œ ë° ê³ ê¸‰ í…ŒìŠ¤íŠ¸ íŒ¨í„´ (.cursorrulesì˜ ë³´ì™„ ë¬¸ì„œ)
---

# TDD ì‹¬í™” ê°€ì´ë“œ ë° ê³ ê¸‰ í…ŒìŠ¤íŠ¸ íŒ¨í„´

> **ì°¸ê³ **: ê¸°ë³¸ TDD ê·œì¹™ê³¼ ë¡œê¹… ì»¨ë²¤ì…˜ì€ `.cursorrules`ì—ì„œ ê´€ë¦¬ë©ë‹ˆë‹¤.
> ì´ ë¬¸ì„œëŠ” ê³ ê¸‰ íŒ¨í„´ê³¼ ì‹¬í™” ë‚´ìš©ì„ ë‹¤ë£¹ë‹ˆë‹¤.

## ğŸ§ª ê³ ê¸‰ TDD íŒ¨í„´

### Test Doubles ì „ëµ

**Stub vs Mock vs Spy ì„ íƒ ê¸°ì¤€:**

- **Stub**: ìƒíƒœ ê¸°ë°˜ í…ŒìŠ¤íŠ¸, ê°„ë‹¨í•œ ë°˜í™˜ê°’
- **Mock**: í–‰ìœ„ ê²€ì¦ì´ ì¤‘ìš”í•œ ê²½ìš°
- **Spy**: ë¶€ë¶„ì  ëª¨í‚¹ì´ í•„ìš”í•œ ê²½ìš°

### ê²½ê³„ê°’ í…ŒìŠ¤íŠ¸ íŒ¨í„´

**Boundary Value Analysis:**

- ìµœì†Ÿê°’, ìµœëŒ“ê°’, ê²½ê³„ê°’ Â±1
- null, empty, íŠ¹ìˆ˜ë¬¸ì ì²˜ë¦¬
- ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì˜ ê²½ê³„ ì¡°ê±´

## ğŸ“Š í”„ë¡œì íŠ¸ë³„ í…ŒìŠ¤íŠ¸ ë§¤íŠ¸ë¦­ìŠ¤ (í˜„ì¬ ìƒíƒœ)

### âœ… **ì™„ë£Œëœ í…ŒìŠ¤íŠ¸**

| ëª¨ë“ˆ                 | í…ŒìŠ¤íŠ¸ ìœ í˜• | ìƒíƒœ    | ì»¤ë²„ë¦¬ì§€    |
| -------------------- | ----------- | ------- | ----------- |
| ServiceContextHolder | Unit        | âœ… ì™„ë£Œ | 13/13 í†µê³¼  |
| ëª¨ë˜ ë¡œê¹… ì‹œìŠ¤í…œ     | Template    | âœ… ì™„ë£Œ | ì»¨ë²¤ì…˜ í™•ë¦½ |

### ğŸ”„ **ì§„í–‰ ì¤‘ì¸ í…ŒìŠ¤íŠ¸**

| ëª¨ë“ˆ                            | í…ŒìŠ¤íŠ¸ ìœ í˜•        | ìš°ì„ ìˆœìœ„ | ì˜ˆìƒ ì™„ë£Œ |
| ------------------------------- | ------------------ | -------- | --------- |
| DynamicServiceDataSourceManager | Unit + Integration | P0       | ì´ë²ˆ ì£¼   |
| ServiceContextInterceptor       | Unit               | P0       | ì´ë²ˆ ì£¼   |
| ê¶Œí•œ ê²€ì¦ ì–´ë…¸í…Œì´ì…˜            | Unit               | P0       | ë‹¤ìŒ ì£¼   |

### ğŸ“‹ **ëŒ€ê¸° ì¤‘ì¸ í…ŒìŠ¤íŠ¸**

| ë„ë©”ì¸/ëª¨ë“ˆ            | í…ŒìŠ¤íŠ¸ ìœ í˜•        | ìš°ì„ ìˆœìœ„ | ë‹¹ë©´ì„± |
| ---------------------- | ------------------ | -------- | ------ |
| **í†µí•© ë°±ì—”ë“œ ë¼ìš°íŒ…** | Unit + Integration | P0       | ë‹¹ë©´   |
| **ì¸ì¦/ì¸ê°€ í”Œë¡œìš°**   | Unit + E2E         | P1       | ì¤‘ê¸°   |
| **ì½˜í…ì¸  ê´€ë¦¬ API**    | Unit + Integration | P1       | ì¤‘ê¸°   |
| **íŒŒì¼ ì—…ë¡œë“œ í”Œë¡œìš°** | Unit + Integration | P1       | ì¤‘ê¸°   |
| **ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ** | Unit + E2E         | P2       | ì›ê±°ë¦¬ |
| **í†µí•© ëŒ€ì‹œë³´ë“œ**      | E2E                | P2       | ì›ê±°ë¦¬ |

## ğŸ”§ ê³ ê¸‰ í…ŒìŠ¤íŠ¸ íŒ¨í„´

### Parameterized Tests í™œìš©

```java
@ParameterizedTest
@ValueSource(strings = {"douzone", "service1", "integrated_cms"})
@DisplayName("ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ IDì— ëŒ€í•´ ì»¨í…ìŠ¤íŠ¸ê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ëœë‹¤")
void ë‹¤ì–‘í•œ_ì„œë¹„ìŠ¤_IDì—_ëŒ€í•´_ì»¨í…ìŠ¤íŠ¸ê°€_ì˜¬ë°”ë¥´ê²Œ_ì„¤ì •ëœë‹¤(String serviceId) {
    // Given-When-Then with parameter
    ServiceContextHolder.setCurrentServiceId(serviceId);
    assertThat(ServiceContextHolder.getCurrentServiceId()).isEqualTo(serviceId);
}

@ParameterizedTest
@CsvSource({
    "douzone, false",
    "service1, false",
    "integrated_cms, true"
})
@DisplayName("ì„œë¹„ìŠ¤ë³„ í†µí•© CMS ì»¨í…ìŠ¤íŠ¸ ì—¬ë¶€ë¥¼ ì •í™•íˆ íŒë‹¨í•œë‹¤")
void ì„œë¹„ìŠ¤ë³„_í†µí•©_CMS_ì»¨í…ìŠ¤íŠ¸_ì—¬ë¶€ë¥¼_ì •í™•íˆ_íŒë‹¨í•œë‹¤(String serviceId, boolean expected) {
    ServiceContextHolder.setCurrentServiceId(serviceId);
    assertThat(ServiceContextHolder.isIntegratedCmsContext()).isEqualTo(expected);
}
```

### Custom Assertions ìƒì„±

```java
public class ServiceContextAssertions {
    public static ServiceContextAssert assertThat(String serviceId) {
        return new ServiceContextAssert(serviceId);
    }

    public static class ServiceContextAssert {
        private final String actual;

        public ServiceContextAssert(String actual) {
            this.actual = actual;
        }

        public ServiceContextAssert isIntegratedCms() {
            if (!"integrated_cms".equals(actual)) {
                throw new AssertionError("Expected integrated_cms but was: " + actual);
            }
            return this;
        }

        public ServiceContextAssert isRegularService() {
            if ("integrated_cms".equals(actual)) {
                throw new AssertionError("Expected regular service but was integrated_cms");
            }
            return this;
        }
    }
}
```

### Testcontainers ê³ ê¸‰ íŒ¨í„´

```java
@Testcontainers
class AdvancedIntegrationTest {

    @Container
    static GenericContainer<?> redis = new GenericContainer<>("redis:7-alpine")
            .withExposedPorts(6379);

    @Container
    static MariaDBContainer<?> database = new MariaDBContainer<>("mariadb:10.6")
            .withDatabaseName("test_db");

    @DynamicPropertySource
    static void configureProperties(DynamicPropertyRegistry registry) {
        registry.add("spring.redis.host", redis::getHost);
        registry.add("spring.redis.port", redis::getFirstMappedPort);
        registry.add("spring.datasource.url", database::getJdbcUrl);
    }

    @Test
    @DisplayName("ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œ í†µí•© í…ŒìŠ¤íŠ¸ê°€ ë™ì‘í•œë‹¤")
    void ë‹¤ì¤‘_ì»¨í…Œì´ë„ˆ_í™˜ê²½ì—ì„œ_í†µí•©_í…ŒìŠ¤íŠ¸ê°€_ë™ì‘í•œë‹¤() {
        // ì‹¤ì œ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•œ í†µí•© í…ŒìŠ¤íŠ¸
        assertThat(redis.isRunning()).isTrue();
        assertThat(database.isRunning()).isTrue();
    }
}
```

### Performance Testing íŒ¨í„´

```java
@Test
@Timeout(value = 2, unit = TimeUnit.SECONDS)
@DisplayName("ì„œë¹„ìŠ¤ ì»¨í…ìŠ¤íŠ¸ ì „í™˜ì´ 2ì´ˆ ì´ë‚´ì— ì™„ë£Œëœë‹¤")
void ì„œë¹„ìŠ¤_ì»¨í…ìŠ¤íŠ¸_ì „í™˜ì´_2ì´ˆ_ì´ë‚´ì—_ì™„ë£Œëœë‹¤() {
    // ì„±ëŠ¥ ê³„ì•½ í…ŒìŠ¤íŠ¸
    StopWatch stopWatch = new StopWatch();
    stopWatch.start();

    ServiceContextHolder.setCurrentServiceId("performance-test");
    String result = ServiceContextHolder.getCurrentServiceId();

    stopWatch.stop();
    assertThat(result).isEqualTo("performance-test");
    assertThat(stopWatch.getTotalTimeMillis()).isLessThan(100);
}
```

### Property-Based Testing

```java
@Test
@DisplayName("ì„œë¹„ìŠ¤ IDëŠ” í•­ìƒ ì„¤ì •í•œ ê°’ê³¼ ë™ì¼í•˜ê²Œ ì¡°íšŒëœë‹¤")
void ì„œë¹„ìŠ¤_IDëŠ”_í•­ìƒ_ì„¤ì •í•œ_ê°’ê³¼_ë™ì¼í•˜ê²Œ_ì¡°íšŒëœë‹¤() {
    // Property: setê³¼ getì˜ ì¼ê´€ì„±
    Arbitrary<String> serviceIds = Arbitraries.strings()
            .withCharRange('a', 'z')
            .ofMinLength(3)
            .ofMaxLength(20);

    Property.def("setëœ serviceIdëŠ” í•­ìƒ getìœ¼ë¡œ ì¡°íšŒ ê°€ëŠ¥")
            .forAll(serviceIds)
            .check(serviceId -> {
                ServiceContextHolder.setCurrentServiceId(serviceId);
                return ServiceContextHolder.getCurrentServiceId().equals(serviceId);
            });
}
```

## ğŸš« TDD ê°€ë“œë ˆì¼ (ê¸ˆì§€ ì‚¬í•­)

### ì½”ë“œ ì‘ì„± ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ìƒˆë¡œìš´ ê¸°ëŠ¥/ë³€ê²½ ì‹œ í•„ìˆ˜ í™•ì¸ì‚¬í•­:**

1. **ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ëŠ”ê°€?**

   - [ ] í•µì‹¬ happy path í…ŒìŠ¤íŠ¸ ìµœì†Œ 1ê°œ
   - [ ] ì£¼ìš” ì˜ˆì™¸ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ìµœì†Œ 1ê°œ
   - [ ] í…ŒìŠ¤íŠ¸ê°€ ì‹¤ì œë¡œ ì‹¤íŒ¨í•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆëŠ”ê°€?

2. **í…ŒìŠ¤íŠ¸ ì´ë¦„ì´ ì—…ë¬´ ì–¸ì–´ë¡œ ì‘ì„±ë˜ì—ˆëŠ”ê°€?**

   - [ ] í•œêµ­ì–´ë¡œ ëª…í™•í•œ ì˜ë„ í‘œí˜„
   - [ ] ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì´ë‚˜ ì‚¬ìš©ì ìŠ¤í† ë¦¬ ë°˜ì˜
   - [ ] ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­ë³´ë‹¤ ì—…ë¬´ì  ì˜ë¯¸ ì¤‘ì‹¬

3. **ì™¸ë¶€ ì˜ì¡´ì„±ì´ ê²©ë¦¬ë˜ì—ˆëŠ”ê°€?**
   - [ ] ì‹œê³„/ëœë¤/UUID ë“± ë¹„ê²°ì •ì  ìš”ì†Œ ì œì–´
   - [ ] ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œ ëª¨í‚¹ ë˜ëŠ” Testcontainers ì‚¬ìš©
   - [ ] íŒŒì¼ì‹œìŠ¤í…œ ì ‘ê·¼ ëª¨í‚¹ ë˜ëŠ” ì„ì‹œ ë””ë ‰í† ë¦¬ ì‚¬ìš©

### ê¸ˆì§€ë˜ëŠ” íŒ¨í„´ë“¤

```java
// âŒ ê¸ˆì§€: í…ŒìŠ¤íŠ¸ ì—†ì´ í”„ë¡œë•ì…˜ ì½”ë“œ ì‘ì„±
public class NewFeatureService {
    public void doSomething() {
        // êµ¬í˜„ ì½”ë“œ
    }
}

// âŒ ê¸ˆì§€: ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­ ì¤‘ì‹¬ í…ŒìŠ¤íŠ¸ ì´ë¦„
@Test
void testMethod1() { }

@Test
void shouldReturnString() { }

// âŒ ê¸ˆì§€: ëª¨í‚¹ ë‚¨ìš© (êµ¬í˜„ ì„¸ë¶€ì— ê³ ì°©)
@Test
void test() {
    verify(repository, times(1)).findById(anyLong());
    verify(mapper, times(1)).toDto(any());
    // ë„ˆë¬´ ë§ì€ êµ¬í˜„ ì„¸ë¶€ ê²€ì¦
}

// âŒ ê¸ˆì§€: ë¹„ê²°ì •ì  í…ŒìŠ¤íŠ¸
@Test
void test() {
    String id = UUID.randomUUID().toString(); // ë§¤ë²ˆ ë‹¤ë¥¸ ê°’
    LocalDateTime now = LocalDateTime.now(); // ì‹œê°„ ì˜ì¡´
}
```

## âœ… ê¶Œì¥ë˜ëŠ” íŒ¨í„´ë“¤

### ë„ë©”ì¸ ì´ë²¤íŠ¸ í…ŒìŠ¤íŠ¸

```java
@Test
@DisplayName("ì„œë¹„ìŠ¤ê°€ ë¹„í™œì„±í™”ë˜ë©´ ê´€ë ¨ ëª¨ë“  ì„¸ì…˜ì´ ì¢…ë£Œëœë‹¤")
void ì„œë¹„ìŠ¤ê°€_ë¹„í™œì„±í™”ë˜ë©´_ê´€ë ¨_ëª¨ë“ _ì„¸ì…˜ì´_ì¢…ë£Œëœë‹¤() {
    // Given
    Service service = serviceRepository.save(activeService("douzone"));
    List<Session> activeSessions = createActiveSessions(service, 3);

    // When
    service.deactivate();
    serviceRepository.save(service);

    // Then
    List<Session> sessions = sessionRepository.findByServiceId("douzone");
    assertThat(sessions).allMatch(Session::isTerminated);
}
```

### ë¶ˆë³€ì¡°ê±´ í…ŒìŠ¤íŠ¸

```java
@Test
@DisplayName("ì´ë¯¸ í™•ì •ëœ ì˜ˆì•½ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ë‹¤")
void ì´ë¯¸_í™•ì •ëœ_ì˜ˆì•½ì€_ìˆ˜ì •í• _ìˆ˜_ì—†ë‹¤() {
    // Given
    Reservation confirmedReservation = reservationRepository.save(
        confirmedReservation()
    );

    // When & Then
    assertThatThrownBy(() ->
        confirmedReservation.changeDate(LocalDate.now().plusDays(1))
    ).isInstanceOf(ReservationConfirmedException.class)
     .hasMessage("í™•ì •ëœ ì˜ˆì•½ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
}
```

### ê³„ì•½ í…ŒìŠ¤íŠ¸ (í¬íŠ¸/ì–´ëŒ‘í„°)

```java
@Test
@DisplayName("ì™¸ë¶€ ê²°ì œ ì‹œìŠ¤í…œ ì—°ë™ ì‹œ ì˜¬ë°”ë¥¸ ìš”ì²­ í˜•ì‹ì„ ì „ì†¡í•œë‹¤")
void ì™¸ë¶€_ê²°ì œ_ì‹œìŠ¤í…œ_ì—°ë™_ì‹œ_ì˜¬ë°”ë¥¸_ìš”ì²­_í˜•ì‹ì„_ì „ì†¡í•œë‹¤() {
    // Given
    PaymentRequest paymentRequest = validPaymentRequest();
    PaymentGateway mockGateway = mock(PaymentGateway.class);

    // When
    paymentService.processPayment(paymentRequest);

    // Then
    ArgumentCaptor<ExternalPaymentRequest> captor =
        ArgumentCaptor.forClass(ExternalPaymentRequest.class);
    verify(mockGateway).charge(captor.capture());

    ExternalPaymentRequest captured = captor.getValue();
    assertThat(captured.getAmount()).isEqualTo(paymentRequest.getAmount());
    assertThat(captured.getCurrency()).isEqualTo("KRW");
}
```

## ğŸ”„ ë°±ë¡œê·¸ â†’ í…ŒìŠ¤íŠ¸ ì‹œë“œ ìë™í™”

### ë‹¹ë©´ ê³¼ì œ (P0) - ì„¸ë¶„í™”ëœ í…ŒìŠ¤íŠ¸

**í†µí•© ë°±ì—”ë“œ ë¼ìš°íŒ… ì‹œìŠ¤í…œ:**

```java
// 1. URL íŒ¨í„´ ë§¤ì¹­ í…ŒìŠ¤íŠ¸
@Test
@DisplayName("/api/v2/cms/douzone/content ìš”ì²­ ì‹œ douzone ì„œë¹„ìŠ¤ ì»¨í…ìŠ¤íŠ¸ê°€ ì„¤ì •ëœë‹¤")
void douzone_ì½˜í…ì¸ _API_ìš”ì²­_ì‹œ_ì˜¬ë°”ë¥¸_ì„œë¹„ìŠ¤_ì»¨í…ìŠ¤íŠ¸ê°€_ì„¤ì •ëœë‹¤() {
    // êµ¬í˜„ í•„ìš”
}

// 2. ì„œë¹„ìŠ¤ ì¡´ì¬ ì—¬ë¶€ ê²€ì¦ í…ŒìŠ¤íŠ¸
@Test
@DisplayName("ì¡´ì¬í•˜ì§€_ì•ŠëŠ”_ì„œë¹„ìŠ¤_ìš”ì²­_ì‹œ_404_ì—ëŸ¬ê°€_ë°˜í™˜ëœë‹¤")
void ì¡´ì¬í•˜ì§€_ì•ŠëŠ”_ì„œë¹„ìŠ¤_ìš”ì²­_ì‹œ_404_ì—ëŸ¬ê°€_ë°˜í™˜ëœë‹¤() {
    // êµ¬í˜„ í•„ìš”
}

// 3. ë°ì´í„°ì†ŒìŠ¤ ì „í™˜ í…ŒìŠ¤íŠ¸
@Test
@DisplayName("ì„œë¹„ìŠ¤_ì»¨í…ìŠ¤íŠ¸_ë³€ê²½_ì‹œ_ì ì ˆí•œ_ë°ì´í„°ì†ŒìŠ¤ë¡œ_ì „í™˜ëœë‹¤")
void ì„œë¹„ìŠ¤_ì»¨í…ìŠ¤íŠ¸_ë³€ê²½_ì‹œ_ì ì ˆí•œ_ë°ì´í„°ì†ŒìŠ¤ë¡œ_ì „í™˜ëœë‹¤() {
    // êµ¬í˜„ í•„ìš”
}
```

### ì¤‘ê¸° ê³¼ì œ (P1) - í†µí•© í…ŒìŠ¤íŠ¸ ì¤‘ì‹¬

**í†µí•© ëŒ€ì‹œë³´ë“œ:**

```typescript
// ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ (E2E)
describe("í†µí•© ëŒ€ì‹œë³´ë“œ ê¸°ëŠ¥", () => {
  test("í†µí•© ê´€ë¦¬ìê°€ ë¡œê·¸ì¸í•˜ë©´ ëª¨ë“  ì„œë¹„ìŠ¤ì˜ í˜„í™©ì„ ë³¼ ìˆ˜ ìˆë‹¤", async () => {
    // êµ¬í˜„ í•„ìš”
  });

  test("ì„œë¹„ìŠ¤ë³„ ê´€ë¦¬ìëŠ” í• ë‹¹ëœ ì„œë¹„ìŠ¤ì˜ í˜„í™©ë§Œ ë³¼ ìˆ˜ ìˆë‹¤", async () => {
    // êµ¬í˜„ í•„ìš”
  });
});
```

### ì›ê±°ë¦¬ ê³¼ì œ (P2) - ê³„ì•½ í…ŒìŠ¤íŠ¸ ì¤‘ì‹¬

**ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§:**

```java
// ê³„ì•½ í…ŒìŠ¤íŠ¸
@Test
@DisplayName("API_ì‘ë‹µ_ì‹œê°„ì€_300ms_ì´ë‚´ì—¬ì•¼_í•œë‹¤")
void API_ì‘ë‹µ_ì‹œê°„ì€_300ms_ì´ë‚´ì—¬ì•¼_í•œë‹¤() {
    // ì„±ëŠ¥ ê³„ì•½ í…ŒìŠ¤íŠ¸ êµ¬í˜„ í•„ìš”
}
```

## ğŸ› ï¸ ì‹¤í–‰ ë° CI í†µí•©

### ë¡œì»¬ ê°œë°œ í™˜ê²½

#### ğŸš¨ **ì¤‘ìš”: ë„ì»¤ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í•„ìˆ˜**

**ì‹¤ì œ í”„ë¡œì íŠ¸ í™˜ê²½:**

- **ì»¨í…Œì´ë„ˆ**: `unitedcms-integrated-backend-1` (ë°±ì—”ë“œ)
- **ë¹Œë“œ ë„êµ¬**: Maven (Maven wrapper ì—†ì´ ì§ì ‘ `mvn` ì‚¬ìš©)
- **ì„±ê³µ í™•ì¸**: ëª¨ë˜ ë¡œê¹… ìŠ¤íƒ€ì¼ë¡œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì¶œë ¥

**ëª¨ë“  í…ŒìŠ¤íŠ¸ëŠ” ë°˜ë“œì‹œ ë„ì»¤ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.**

```bash
# ğŸš¨ ì‹¤ì œ ì»¨í…Œì´ë„ˆ ì´ë¦„ í™•ì¸ í•„ìˆ˜
docker ps --filter "name=unitedcms"

# ğŸ³ ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ë„ì»¤ í™˜ê²½) - Maven wrapper ì—†ì´ ì§ì ‘ mvn ì‚¬ìš©
docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="*Test" -q

# ğŸ³ íŠ¹ì • í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ì‹¤í–‰ (ë„ì»¤ í™˜ê²½)
docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="ServiceEntityTest" -q

# ğŸ³ íŠ¹ì • íŒ¨í‚¤ì§€ì˜ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ë„ì»¤ í™˜ê²½)
docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="api.v2.integrated_cms.**.*Test" -q

# ğŸ³ Repository í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (JPA ë°ì´í„° ê³„ì¸µ)
docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="*Repository*Test" -q

# ğŸ³ í†µí•© í…ŒìŠ¤íŠ¸ (Testcontainers + ë„ì»¤ í™˜ê²½)
docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="*IntegrationTest" -q

# ğŸ³ ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ (ë„ì»¤ í™˜ê²½)
docker exec -it unitedcms-integrated-backend-1 mvn jacoco:report

# ğŸ³ í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ë„ì»¤ í™˜ê²½)
docker exec -it unitedcms-integrated-frontend-1 npm test -- --watchAll=false

# ğŸ³ í”„ë¡ íŠ¸ì—”ë“œ ì»¤ë²„ë¦¬ì§€ (ë„ì»¤ í™˜ê²½)
docker exec -it unitedcms-integrated-frontend-1 npm test -- --coverage

# ğŸ³ douzone í´ë¼ì´ì–¸íŠ¸ í…ŒìŠ¤íŠ¸ (ë³„ë„ ì»¨í…Œì´ë„ˆ)
docker exec -it unitedcms-douzone-frontend-1 npm test -- --watchAll=false
```

#### ğŸ“‹ **ë„ì»¤ ì»¨í…Œì´ë„ˆ í™•ì¸ ëª…ë ¹ì–´**

```bash
# ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ í™•ì¸
docker ps

# ì»¨í…Œì´ë„ˆ ì´ë¦„ í™•ì¸ (unitedcms ê´€ë ¨)
docker ps --filter "name=unitedcms"

# í˜„ì¬ í”„ë¡œì íŠ¸ ì»¨í…Œì´ë„ˆ ì´ë¦„ë“¤:
# - unitedcms-integrated-backend-1   (ë°±ì—”ë“œ Spring Boot)
# - unitedcms-integrated-frontend-1  (í†µí•© í´ë¼ì´ì–¸íŠ¸ Next.js)
# - unitedcms-douzone-frontend-1     (ë”ì¡´ í´ë¼ì´ì–¸íŠ¸ Next.js)
# - unitedcms-db-1                   (MariaDB ë°ì´í„°ë² ì´ìŠ¤)

# ì»¨í…Œì´ë„ˆ ì ‘ì† (ì¸í„°ë™í‹°ë¸Œ ëª¨ë“œ)
docker exec -it unitedcms-integrated-backend-1 /bin/bash
docker exec -it unitedcms-integrated-frontend-1 /bin/bash
docker exec -it unitedcms-douzone-frontend-1 /bin/bash
```

#### âš ï¸ **ë¡œì»¬ í™˜ê²½ ì§ì ‘ ì‹¤í–‰ ê¸ˆì§€**

```bash
# âŒ ê¸ˆì§€: ë¡œì»¬ì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./mvnw test  # Maven wrapper ì—†ìŒ, í™˜ê²½ ì°¨ì´ë¡œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ê°€ëŠ¥
mvn test     # ë¡œì»¬ Maven ì„¤ì •ê³¼ ë„ì»¤ í™˜ê²½ ì°¨ì´
npm test     # ì˜ì¡´ì„± ì´ìŠˆ ë°œìƒ ê°€ëŠ¥

# âœ… í•„ìˆ˜: ë„ì»¤ í™˜ê²½ì—ì„œë§Œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
docker exec -it unitedcms-integrated-backend-1 mvn test
docker exec -it unitedcms-integrated-frontend-1 npm test
docker exec -it unitedcms-douzone-frontend-1 npm test
```

#### ğŸ”§ **ë„ì»¤ í™˜ê²½ ë¬¸ì œ í•´ê²°**

```bash
# ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ì§€ ì•Šì€ ê²½ìš°
docker-compose up -d

# íŠ¹ì • ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ì´ í•„ìš”í•œ ê²½ìš°
docker-compose restart integrated-backend
docker-compose restart integrated-frontend
docker-compose restart douzone-frontend
docker-compose restart db

# ë¡œê·¸ í™•ì¸ (ë¬¸ì œ ì§„ë‹¨)
docker logs unitedcms-integrated-backend-1
docker logs unitedcms-integrated-frontend-1
docker logs unitedcms-douzone-frontend-1
docker logs unitedcms-db-1

# ì»¨í…Œì´ë„ˆ ë‚´ë¶€ íŒŒì¼ ì‹œìŠ¤í…œ í™•ì¸ (ë””ë²„ê¹…)
docker exec -it unitedcms-integrated-backend-1 ls -la
docker exec -it unitedcms-integrated-backend-1 pwd

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
docker logs -f unitedcms-integrated-backend-1
```

#### ğŸ¯ **ì‹¤ì œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ë° ì˜ˆì‹œ**

**ì„±ê³µì ì¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì˜ˆì‹œ:**

```bash
# ì„œë¹„ìŠ¤ ì—”í‹°í‹° í…ŒìŠ¤íŠ¸ ì‹¤í–‰
$ docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="ServiceEntityTest" -q

ğŸ§ª TEST #1 â”‚ Service Entity Creation with Valid Data
  ğŸ” Setup: ì˜¬ë°”ë¥¸ ì„œë¹„ìŠ¤ ì •ë³´ ì¤€ë¹„
  âš¡ Action: ServiceEntity ìƒì„±
  âœ¨ Verify: ì„œë¹„ìŠ¤ ì—”í‹°í‹° í•„ë“œ ê°’ ê²€ì¦
    âœ“ Assertion passed: ëª¨ë“  í•„ë“œê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë¨

ğŸ§ª TEST #2 â”‚ Service Entity Update Operations
  ğŸ” Setup: ê¸°ì¡´ ì„œë¹„ìŠ¤ ì—”í‹°í‹° ìƒì„±
  âš¡ Action: ì„œë¹„ìŠ¤ ì •ë³´ ì—…ë°ì´íŠ¸
  âœ¨ Verify: ì—…ë°ì´íŠ¸ëœ ì •ë³´ ê²€ì¦
    âœ“ Assertion passed: ì„œë¹„ìŠ¤ ì •ë³´ê°€ ì˜¬ë°”ë¥´ê²Œ ì—…ë°ì´íŠ¸ë¨

# ... (ì´ 6ê°œ í…ŒìŠ¤íŠ¸ ì„±ê³µ)
```

**TDD ê°œë°œ ì‚¬ì´í´ ì˜ˆì‹œ:**

```bash
# 1. ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„± í›„ ì‹¤í–‰
$ docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="ServiceRepositoryTest" -q
# â†’ ì»´íŒŒì¼ ì—ëŸ¬ ë˜ëŠ” í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ í™•ì¸

# 2. ìµœì†Œ êµ¬í˜„ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í†µê³¼
$ docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="ServiceRepositoryTest" -q
# â†’ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸

# 3. ì „ì²´ ê´€ë ¨ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ìœ¼ë¡œ ë¦¬ê·¸ë ˆì…˜ í™•ì¸
$ docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="api.v2.integrated_cms.service.**.*Test" -q
```

**íŒ¨í‚¤ì§€ë³„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê°€ì´ë“œ:**

```bash
# ì„œë¹„ìŠ¤ ë„ë©”ì¸ ê´€ë ¨ ëª¨ë“  í…ŒìŠ¤íŠ¸
docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="api.v2.integrated_cms.service.**.*Test" -q

# Repository ê³„ì¸µ í…ŒìŠ¤íŠ¸ë§Œ
docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="*Repository*Test" -q

# Controller ê³„ì¸µ í…ŒìŠ¤íŠ¸ë§Œ
docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="*Controller*Test" -q

# Service ê³„ì¸µ í…ŒìŠ¤íŠ¸ë§Œ
docker exec -it unitedcms-integrated-backend-1 mvn test -Dtest="*Service*Test" -q
```

### GitHub Actions CI ì„¤ì •

```yaml
name: TDD Quality Gate

on: [pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Java
        uses: actions/setup-java@v3
        with:
          java-version: "17"

      - name: Run Tests
        run: |
          ./mvnw test -q

      - name: Check Coverage
        run: |
          ./mvnw jacoco:check -Dcoverage.minimum=80

      - name: Post Test Summary
        uses: dorny/test-reporter@v1
        with:
          name: Test Results
          path: target/surefire-reports/*.xml
          reporter: java-junit
```

## ğŸ“Š TDD ì„±ìˆ™ë„ ì¸¡ì •

### ë©”íŠ¸ë¦­ ê¸°ì¤€

- **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**: ë¼ì¸ 80% / ë¸Œëœì¹˜ 70% (ìµœì†Œ ê¸°ì¤€)
- **í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ < 10ì´ˆ, í†µí•© í…ŒìŠ¤íŠ¸ < 2ë¶„
- **í…ŒìŠ¤íŠ¸ ì•ˆì •ì„±**: Flaky í…ŒìŠ¤íŠ¸ 0%
- **ë„ë©”ì¸ ê·œì¹™ ì»¤ë²„ë¦¬ì§€**: í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ 100%

### ì •ê¸° ê²€í† ì‚¬í•­

- ì£¼ê°„: ìƒˆë¡œ ì¶”ê°€ëœ í…ŒìŠ¤íŠ¸ ë¦¬ë·°
- ì›”ê°„: í…ŒìŠ¤íŠ¸ ì„±ëŠ¥ ë° ì•ˆì •ì„± ê²€í† 
- ë¶„ê¸°: TDD í”„ë¡œì„¸ìŠ¤ ê°œì„ ì  ë„ì¶œ

## ğŸ¯ ì‹¬í™” í•™ìŠµ ë¦¬ì†ŒìŠ¤

### ì¶”ì²œ ë„ì„œ ë° ìë£Œ

- **Growing Object-Oriented Software, Guided by Tests** - Steve Freeman & Nat Pryce
- **Test Driven Development: By Example** - Kent Beck
- **Effective Unit Testing** - Lasse Koskela
- **Spring Boot Testing Guide** - Official Documentation

### ì˜¨ë¼ì¸ ë¦¬ì†ŒìŠ¤

- **JUnit 5 User Guide**: https://junit.org/junit5/docs/current/user-guide/
- **AssertJ Documentation**: https://assertj.github.io/doc/
- **Testcontainers Guides**: https://www.testcontainers.org/

---

> **ì°¸ê³ **: ê¸°ë³¸ TDD ì‹¤í–‰ ê·œì¹™ê³¼ í…œí”Œë¦¿ì€ `.cursorrules` íŒŒì¼ì—ì„œ ê´€ë¦¬ë©ë‹ˆë‹¤.
> ì´ ë¬¸ì„œëŠ” ê³ ê¸‰ íŒ¨í„´ê³¼ ì‹¬í™” ë‚´ìš©ë§Œ í¬í•¨í•©ë‹ˆë‹¤.
