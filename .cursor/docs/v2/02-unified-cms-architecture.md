# í†µí•© CMS ìƒì„¸ ì•„í‚¤í…ì²˜ ì„¤ê³„

## ğŸ“‹ ë¬¸ì„œ ì •ë³´

- **ë¬¸ì„œëª…**: í†µí•© CMS ìƒì„¸ ì•„í‚¤í…ì²˜ ì„¤ê³„
- **ë²„ì „**: 2.0.0
- **ìµœì¢… ìˆ˜ì •ì¼**: 2024-03-25
- **ìƒíƒœ**: ìµœì‹ 

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ëª©ì  ë° ëª©í‘œ

ë³¸ ë¬¸ì„œëŠ” ê¸°ì¡´ ë‹¨ì¼ CMS ì‹œìŠ¤í…œì„ **ë‹¤ì¤‘ ì„œë¹„ìŠ¤ í†µí•© ê´€ë¦¬**ê°€ ê°€ëŠ¥í•œ ê³ ë„í™”ëœ CMS í”Œë«í¼ìœ¼ë¡œ ì „í™˜í•˜ê¸° ìœ„í•œ ì•„í‚¤í…ì²˜ ê°œìš”ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

#### ğŸ¯ í•µì‹¬ ëª©í‘œ

- **í†µí•© ê´€ë¦¬**: ì—¬ëŸ¬ CMS ì„œë¹„ìŠ¤ë¥¼ í•˜ë‚˜ì˜ ê´€ë¦¬ì í™”ë©´ì—ì„œ í†µí•© ê´€ë¦¬
- **ì„œë¹„ìŠ¤ ë¶„ë¦¬**: ê° ì„œë¹„ìŠ¤ë³„ ë…ë¦½ì ì¸ ë°ì´í„°ë² ì´ìŠ¤ì™€ ë³´ì•ˆ ì •ì±…
- **ìœ ì—°í•œ ë°°í¬**: ì˜¨í”„ë ˆë¯¸ìŠ¤ ë‹¨ì¼ ì„œë²„ ë˜ëŠ” í´ë¼ìš°ë“œ ë‹¤ì¤‘ ì„œë²„ ì§€ì›
- **í™•ì¥ì„±**: ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì¶”ê°€ ì‹œ ìµœì†Œí•œì˜ ìˆ˜ì •ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥

#### ğŸ“Š ê¸°ëŒ€ íš¨ê³¼

- **ìš´ì˜ íš¨ìœ¨ì„±**: ê´€ë¦¬ ì‘ì—… ì‹œê°„ 50% ê°ì†Œ, ì¥ì•  ëŒ€ì‘ ì‹œê°„ 60% ë‹¨ì¶•
- **ë³´ì•ˆ ê°•í™”**: ë³´ì•ˆ ì‚¬ê³  ìœ„í—˜ 70% ê°ì†Œ, ê·œì • ì¤€ìˆ˜ìœ¨ 100% ë‹¬ì„±
- **ì‚¬ìš©ì ê²½í—˜**: ì„œë¹„ìŠ¤ ê°€ìš©ì„± 99.9% ë‹¬ì„±, ì‘ë‹µ ì‹œê°„ 40% ê°œì„ 

### 1.2 ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤

#### ğŸ¢ ì‹œë‚˜ë¦¬ì˜¤ A: ì˜¨í”„ë ˆë¯¸ìŠ¤ í†µí•© ë°°í¬

- **í™˜ê²½**: ë‹¨ì¼ ì„œë²„, ë™ì¼í•œ í´ë¼ì´ì–¸íŠ¸ IP
- **ìš©ë„**: ê¸°ì—… ë‚´ë¶€ í†µí•© ê´€ë¦¬, ì†Œê·œëª¨ ì„œë¹„ìŠ¤ ìš´ì˜
- **ì¥ì **: ê´€ë¦¬ ë‹¨ìˆœì„±, ë„¤íŠ¸ì›Œí¬ ë¹„ìš© ì ˆê°

#### â˜ï¸ ì‹œë‚˜ë¦¬ì˜¤ B: í´ë¼ìš°ë“œ ë¶„ì‚° ë°°í¬

- **í™˜ê²½**: ë‹¤ì¤‘ ì„œë²„, ì„œë¹„ìŠ¤ë³„ ë…ë¦½ IP
- **ìš©ë„**: ëŒ€ê·œëª¨ ì„œë¹„ìŠ¤, ê³ ê°€ìš©ì„± ìš”êµ¬ì‚¬í•­
- **ì¥ì **: í™•ì¥ì„±, ì¥ì•  ê²©ë¦¬, ì„±ëŠ¥ ìµœì í™”

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ì „ì²´ êµ¬ì„±ë„

```mermaid
graph TB
    subgraph "í´ë¼ì´ì–¸íŠ¸ ê³„ì¸µ"
        UI[í†µí•© ê´€ë¦¬ì UI<br/>Next.js]
        C1[Service1 Client]
        C2[Service2 Client]
        CN[ServiceN Client]
    end

    subgraph "API Gateway & Proxy"
        NGINX[Nginx Reverse Proxy]
        GATEWAY[API Gateway<br/>Spring Cloud Gateway]
    end

    subgraph "ë°±ì—”ë“œ ì„œë¹„ìŠ¤"
        UNIFIED[í†µí•© API ì„œë²„<br/>Spring Boot]
        SERVICE1[Service1 API]
        SERVICE2[Service2 API]
        SERVICEN[ServiceN API]
    end

    subgraph "ë°ì´í„°ë² ì´ìŠ¤ ê³„ì¸µ"
        MASTER_DB[(í†µí•© ë©”íƒ€ DB<br/>ì„œë¹„ìŠ¤ ì ‘ê·¼ ì •ë³´)]
        DB1[(Service1 DB)]
        DB2[(Service2 DB)]
        DBN[(ServiceN DB)]
    end

    UI --> NGINX
    C1 --> NGINX
    C2 --> NGINX
    CN --> NGINX

    NGINX --> GATEWAY
    GATEWAY --> UNIFIED
    GATEWAY --> SERVICE1
    GATEWAY --> SERVICE2
    GATEWAY --> SERVICEN

    UNIFIED --> MASTER_DB
    UNIFIED --> DB1
    UNIFIED --> DB2
    UNIFIED --> DBN

    SERVICE1 --> DB1
    SERVICE2 --> DB2
    SERVICEN --> DBN
```

### 2.2 í•µì‹¬ êµ¬ì„± ìš”ì†Œ

#### ğŸ›¡ï¸ í†µí•© API ì„œë²„ (Unified API Server)

- **ì—­í• **: ì„œë¹„ìŠ¤ ë¼ìš°íŒ…, ì¸ì¦/ì¸ê°€, í†µí•© ê´€ë¦¬ ê¸°ëŠ¥
- **ê¸°ìˆ **: Spring Boot + Spring Security + JPA
- **API íŒ¨í„´**: `/api/unified/` + `/api/service{N}/`
- **íŠ¹ì§•**:
  - ë™ì  ë°ì´í„°ì†ŒìŠ¤ ê´€ë¦¬
  - JWT ê¸°ë°˜ ì¸ì¦
  - RBAC + ABAC í•˜ì´ë¸Œë¦¬ë“œ ê¶Œí•œ ì‹œìŠ¤í…œ

#### ğŸ—„ï¸ í†µí•© ë©”íƒ€ ë°ì´í„°ë² ì´ìŠ¤

- **ì—­í• **: ì„œë¹„ìŠ¤ ì •ë³´, ì„¸ë¶„í™”ëœ ê¶Œí•œ ê´€ë¦¬, ê´€ë¦¬ì ê³„ì • ë° ê·¸ë£¹ ì •ë³´ ì €ì¥
- **ì•”í˜¸í™”**: ê°œë³„ DB ì ‘ê·¼ ì •ë³´ëŠ” AES-256ìœ¼ë¡œ ì•”í˜¸í™” ì €ì¥
- **ê¶Œí•œ ì‹œìŠ¤í…œ**: RBAC + ABAC í•˜ì´ë¸Œë¦¬ë“œ ëª¨ë¸ë¡œ ì‚¬ìš©ì/ê·¸ë£¹/ì—­í• /ë©”ë‰´/ê¸°ëŠ¥ë³„ ì„¸ë¶„í™”ëœ ê¶Œí•œ ê´€ë¦¬

#### ğŸ”’ ì„œë¹„ìŠ¤ë³„ ë…ë¦½ ë°ì´í„°ë² ì´ìŠ¤

- **íŠ¹ì§•**: ê° ì„œë¹„ìŠ¤ë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ ë…ë¦½ì ì¸ DB
- **ë³´ì•ˆ**: ì„œë¹„ìŠ¤ë³„ ì „ìš© DB ê³„ì • ë° ê¶Œí•œ
- **ê²©ë¦¬**: ì„œë¹„ìŠ¤ ê°„ ë°ì´í„° ì ‘ê·¼ ì™„ì „ ì°¨ë‹¨

---

## 3. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 3.1 í†µí•© ë©”íƒ€ ë°ì´í„°ë² ì´ìŠ¤ (Master DB)

#### 3.1.1 ì„œë¹„ìŠ¤ ê´€ë¦¬ í…Œì´ë¸”

ì„œë¹„ìŠ¤ ê´€ë¦¬ë¥¼ ìœ„í•œ í…Œì´ë¸”ë“¤ì€ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë©ë‹ˆë‹¤:

##### 3.1.1.1 ê¸°ë³¸ ì •ë³´ í…Œì´ë¸”

- SERVICES: ì„œë¹„ìŠ¤ ê¸°ë³¸ ì •ë³´ ê´€ë¦¬

##### 3.1.1.2 ê´€ë¦¬ì ê³„ì • ê´€ë ¨ í…Œì´ë¸”

- ADMIN_USERS: ê´€ë¦¬ì ê³„ì • ì •ë³´
- ADMIN_GROUPS: ê´€ë¦¬ì ê·¸ë£¹ ì •ë³´
- ADMIN_GROUP_MEMBERS: ê·¸ë£¹ ë©¤ë²„ì‹­ ê´€ë¦¬

##### 3.1.1.3 ê¶Œí•œ ê´€ë¦¬ í…Œì´ë¸”

- ROLES: ì—­í•  ì •ì˜
- PERMISSIONS: ê¶Œí•œ ì •ì˜
- MENUS: ë©”ë‰´ êµ¬ì¡° ì •ì˜
- ADMIN_SERVICE_ROLES: ì‚¬ìš©ì/ê·¸ë£¹ë³„ ì„œë¹„ìŠ¤ ì—­í•  ë§¤í•‘
- ADMIN_MENU_PERMISSIONS: ì‚¬ìš©ì/ê·¸ë£¹ë³„ ë©”ë‰´ ê¶Œí•œ ê´€ë¦¬

> ğŸ“‹ **ë°ì´í„°ë² ì´ìŠ¤ ìƒì„¸ ì„¤ê³„**  
> ì „ì²´ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ, DDL, ì¸ë±ìŠ¤ ì„¤ê³„, ì´ˆê¸° ë°ì´í„° ë“± ìƒì„¸í•œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ë‚´ìš©ì€ [**í†µí•© CMS ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„**](./unified-cms-database-schema.md) ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

#### 3.1.2 í†µí•© ê´€ë¦¬ í…Œì´ë¸”

í†µí•© ê´€ë¦¬ë¥¼ ìœ„í•œ í…Œì´ë¸”ë“¤ì€ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë©ë‹ˆë‹¤:

##### 3.1.2.1 í†µí•© ì½˜í…ì¸  ê´€ë¦¬ í…Œì´ë¸”

- UNIFIED_CONTENT_MANAGEMENT: ì„œë¹„ìŠ¤ë³„ ì½˜í…ì¸  í†µí•© ê´€ë¦¬
- UNIFIED_ACTIVITY_LOGS: í†µí•© ì‹œìŠ¤í…œ í™œë™ ë¡œê·¸

### 3.2 ê°œë³„ ì„œë¹„ìŠ¤ ë°ì´í„°ë² ì´ìŠ¤

ê° ì„œë¹„ìŠ¤ëŠ” ê¸°ì¡´ CMS êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ë˜, í†µí•© ê´€ë¦¬ë¥¼ ìœ„í•œ ë©”íƒ€ë°ì´í„°ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

#### 3.2.1 ê¸°ì¡´ í…Œì´ë¸” í™•ì¥

- ì½˜í…ì¸  ë™ê¸°í™” ìƒíƒœ ì¶”ì 
- í†µí•© ì‹œìŠ¤í…œê³¼ì˜ ì—°ë™ ì •ë³´ ê´€ë¦¬
- ì„œë¹„ìŠ¤ë³„ ê´€ë¦¬ì ë§¤í•‘ í…Œì´ë¸”

> ğŸ“‹ **ê°œë³„ ì„œë¹„ìŠ¤ DB ìŠ¤í‚¤ë§ˆ**  
> ê°œë³„ ì„œë¹„ìŠ¤ ë°ì´í„°ë² ì´ìŠ¤ì˜ í™•ì¥ ìŠ¤í‚¤ë§ˆì™€ ê´€ë ¨ DDLì€ [**í†µí•© CMS ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„**](./unified-cms-database-schema.md) ë¬¸ì„œì˜ "4. ê°œë³„ ì„œë¹„ìŠ¤ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ" ì„¹ì…˜ì„ ì°¸ì¡°í•˜ì„¸ìš”.

---

## 4. API ì„¤ê³„

### 4.1 API êµ¬ì¡°

#### 4.1.1 í†µí•© ê´€ë¦¬ API (`/api/unified/`)

```yaml
# ì¸ì¦ ë° ê¶Œí•œ
POST   /api/unified/auth/login                  # í†µí•© ê´€ë¦¬ì ë¡œê·¸ì¸
POST   /api/unified/auth/logout                 # ë¡œê·¸ì•„ì›ƒ
POST   /api/unified/auth/refresh                # í† í° ê°±ì‹ 
GET    /api/unified/auth/me                     # í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ

# ì„œë¹„ìŠ¤ ê´€ë¦¬
GET    /api/unified/services                    # ì„œë¹„ìŠ¤ ëª©ë¡ ì¡°íšŒ
POST   /api/unified/services                    # ìƒˆ ì„œë¹„ìŠ¤ ë“±ë¡
GET    /api/unified/services/{serviceId}        # ì„œë¹„ìŠ¤ ìƒì„¸ ì •ë³´ ì¡°íšŒ
PUT    /api/unified/services/{serviceId}        # ì„œë¹„ìŠ¤ ì •ë³´ ìˆ˜ì •
DELETE /api/unified/services/{serviceId}        # ì„œë¹„ìŠ¤ ì‚­ì œ
POST   /api/unified/services/{serviceId}/test   # ì„œë¹„ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸
GET    /api/unified/services/{serviceId}/health # ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
GET    /api/unified/services/{serviceId}/stats  # ì„œë¹„ìŠ¤ í†µê³„ ì¡°íšŒ

# í†µí•© ì½˜í…ì¸  ê´€ë¦¬
GET    /api/unified/content                     # ëª¨ë“  ì„œë¹„ìŠ¤ ì½˜í…ì¸  í†µí•© ì¡°íšŒ
GET    /api/unified/content/{contentId}         # ì½˜í…ì¸  ìƒì„¸ ì¡°íšŒ
POST   /api/unified/content/sync                # ì„œë¹„ìŠ¤ë³„ ì½˜í…ì¸  ë™ê¸°í™”
POST   /api/unified/content/bulk-action         # ì¼ê´„ ì‘ì—… (ì‚­ì œ, ìƒíƒœ ë³€ê²½ ë“±)
GET    /api/unified/content/sync/status         # ë™ê¸°í™” ìƒíƒœ ì¡°íšŒ
GET    /api/unified/content/sync/history        # ë™ê¸°í™” ì´ë ¥ ì¡°íšŒ

# í†µí•© íŒì—… ê´€ë¦¬
GET    /api/unified/popups                      # ëª¨ë“  ì„œë¹„ìŠ¤ íŒì—… í†µí•© ì¡°íšŒ
GET    /api/unified/popups/{popupId}           # íŒì—… ìƒì„¸ ì¡°íšŒ
POST   /api/unified/popups/bulk-action          # íŒì—… ì¼ê´„ ê´€ë¦¬
GET    /api/unified/popups/stats                # íŒì—… í†µê³„ ì¡°íšŒ

# ê´€ë¦¬ì ê³„ì • ê´€ë¦¬
GET    /api/unified/admins                      # ê´€ë¦¬ì ëª©ë¡ ì¡°íšŒ
POST   /api/unified/admins                      # ê´€ë¦¬ì ìƒì„±
GET    /api/unified/admins/{adminId}           # ê´€ë¦¬ì ìƒì„¸ ì •ë³´ ì¡°íšŒ
PUT    /api/unified/admins/{adminId}           # ê´€ë¦¬ì ì •ë³´ ìˆ˜ì •
DELETE /api/unified/admins/{adminId}           # ê´€ë¦¬ì ì‚­ì œ
PUT    /api/unified/admins/{adminId}/status    # ê´€ë¦¬ì ìƒíƒœ ë³€ê²½
POST   /api/unified/admins/{adminId}/reset-password # ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”

# ê¶Œí•œ ê´€ë¦¬
GET    /api/unified/permissions                 # ê¶Œí•œ ëª©ë¡ ì¡°íšŒ
POST   /api/unified/permissions                 # ê¶Œí•œ ìƒì„±
PUT    /api/unified/permissions/{permissionId}  # ê¶Œí•œ ìˆ˜ì •
DELETE /api/unified/permissions/{permissionId}  # ê¶Œí•œ ì‚­ì œ
GET    /api/unified/roles                       # ì—­í•  ëª©ë¡ ì¡°íšŒ
POST   /api/unified/roles                       # ì—­í•  ìƒì„±
PUT    /api/unified/roles/{roleId}             # ì—­í•  ìˆ˜ì •
DELETE /api/unified/roles/{roleId}             # ì—­í•  ì‚­ì œ

# ê·¸ë£¹ ê´€ë¦¬
GET    /api/unified/groups                      # ê·¸ë£¹ ëª©ë¡ ì¡°íšŒ
POST   /api/unified/groups                      # ê·¸ë£¹ ìƒì„±
GET    /api/unified/groups/{groupId}           # ê·¸ë£¹ ìƒì„¸ ì •ë³´ ì¡°íšŒ
PUT    /api/unified/groups/{groupId}           # ê·¸ë£¹ ì •ë³´ ìˆ˜ì •
DELETE /api/unified/groups/{groupId}           # ê·¸ë£¹ ì‚­ì œ
POST   /api/unified/groups/{groupId}/members   # ê·¸ë£¹ ë©¤ë²„ ì¶”ê°€
DELETE /api/unified/groups/{groupId}/members/{memberId} # ê·¸ë£¹ ë©¤ë²„ ì œê±°

# í™œë™ ë¡œê·¸
GET    /api/unified/logs                        # í™œë™ ë¡œê·¸ ì¡°íšŒ
GET    /api/unified/logs/export                 # í™œë™ ë¡œê·¸ ë‚´ë³´ë‚´ê¸°
GET    /api/unified/logs/stats                  # í™œë™ í†µê³„ ì¡°íšŒ

# ì‹œìŠ¤í…œ ê´€ë¦¬
GET    /api/unified/system/health               # ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
GET    /api/unified/system/stats                # ì‹œìŠ¤í…œ í†µê³„ ì¡°íšŒ
GET    /api/unified/system/settings             # ì‹œìŠ¤í…œ ì„¤ì • ì¡°íšŒ
PUT    /api/unified/system/settings             # ì‹œìŠ¤í…œ ì„¤ì • ìˆ˜ì •
```

#### 4.1.2 ì„œë¹„ìŠ¤ë³„ API (`/api/service{N}/`)

ê° ì„œë¹„ìŠ¤ëŠ” ë…ë¦½ì ì¸ ì¸ì¦/ì¸ê°€ë¥¼ ìœ ì§€í•˜ë˜, í†µí•© ê´€ë¦¬ë¥¼ ìœ„í•œ ì¶”ê°€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

```yaml
# ì„œë¹„ìŠ¤ ì¸ì¦
POST   /api/service{N}/auth/login               # ì„œë¹„ìŠ¤ë³„ ë¡œê·¸ì¸
POST   /api/service{N}/auth/logout              # ë¡œê·¸ì•„ì›ƒ
POST   /api/service{N}/auth/refresh             # í† í° ê°±ì‹ 
GET    /api/service{N}/auth/me                  # í˜„ì¬ ì‚¬ìš©ì ì •ë³´

# ê²Œì‹œíŒ ê´€ë¦¬
GET    /api/service{N}/board/articles           # ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
POST   /api/service{N}/board/articles           # ê²Œì‹œê¸€ ì‘ì„±
GET    /api/service{N}/board/articles/{id}      # ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ
PUT    /api/service{N}/board/articles/{id}      # ê²Œì‹œê¸€ ìˆ˜ì •
DELETE /api/service{N}/board/articles/{id}      # ê²Œì‹œê¸€ ì‚­ì œ
POST   /api/service{N}/board/articles/bulk      # ê²Œì‹œê¸€ ì¼ê´„ ì‘ì—…
GET    /api/service{N}/board/categories         # ê²Œì‹œíŒ ì¹´í…Œê³ ë¦¬ ì¡°íšŒ
GET    /api/service{N}/board/stats              # ê²Œì‹œíŒ í†µê³„ ì¡°íšŒ

# ì½˜í…ì¸  ê´€ë¦¬
GET    /api/service{N}/content                  # ì½˜í…ì¸  ëª©ë¡ ì¡°íšŒ
POST   /api/service{N}/content                  # ì½˜í…ì¸  ìƒì„±
GET    /api/service{N}/content/{id}             # ì½˜í…ì¸  ìƒì„¸ ì¡°íšŒ
PUT    /api/service{N}/content/{id}             # ì½˜í…ì¸  ìˆ˜ì •
DELETE /api/service{N}/content/{id}             # ì½˜í…ì¸  ì‚­ì œ
POST   /api/service{N}/content/bulk             # ì½˜í…ì¸  ì¼ê´„ ì‘ì—…
GET    /api/service{N}/content/templates        # ì½˜í…ì¸  í…œí”Œë¦¿ ì¡°íšŒ

# íŒì—… ê´€ë¦¬
GET    /api/service{N}/popups                   # íŒì—… ëª©ë¡ ì¡°íšŒ
POST   /api/service{N}/popups                   # íŒì—… ìƒì„±
GET    /api/service{N}/popups/{id}              # íŒì—… ìƒì„¸ ì¡°íšŒ
PUT    /api/service{N}/popups/{id}              # íŒì—… ìˆ˜ì •
DELETE /api/service{N}/popups/{id}              # íŒì—… ì‚­ì œ
PUT    /api/service{N}/popups/{id}/status       # íŒì—… ìƒíƒœ ë³€ê²½

# ë©”ë‰´ ê´€ë¦¬
GET    /api/service{N}/menus                    # ë©”ë‰´ ëª©ë¡ ì¡°íšŒ
POST   /api/service{N}/menus                    # ë©”ë‰´ ìƒì„±
GET    /api/service{N}/menus/{id}               # ë©”ë‰´ ìƒì„¸ ì¡°íšŒ
PUT    /api/service{N}/menus/{id}               # ë©”ë‰´ ìˆ˜ì •
DELETE /api/service{N}/menus/{id}               # ë©”ë‰´ ì‚­ì œ
PUT    /api/service{N}/menus/order              # ë©”ë‰´ ìˆœì„œ ë³€ê²½

# íŒŒì¼ ê´€ë¦¬
POST   /api/service{N}/files/upload             # íŒŒì¼ ì—…ë¡œë“œ
GET    /api/service{N}/files/{id}               # íŒŒì¼ ì¡°íšŒ
DELETE /api/service{N}/files/{id}               # íŒŒì¼ ì‚­ì œ
GET    /api/service{N}/files/stats              # íŒŒì¼ ì‚¬ìš©ëŸ‰ í†µê³„

# í†µí•© ê´€ë¦¬ ì—°ë™
GET    /api/service{N}/sync/status              # ë™ê¸°í™” ìƒíƒœ ì¡°íšŒ
POST   /api/service{N}/sync/request             # ë™ê¸°í™” ìš”ì²­
GET    /api/service{N}/sync/history             # ë™ê¸°í™” ì´ë ¥ ì¡°íšŒ

# ì„œë¹„ìŠ¤ ê´€ë¦¬
GET    /api/service{N}/settings                 # ì„œë¹„ìŠ¤ ì„¤ì • ì¡°íšŒ
PUT    /api/service{N}/settings                 # ì„œë¹„ìŠ¤ ì„¤ì • ìˆ˜ì •
GET    /api/service{N}/stats                    # ì„œë¹„ìŠ¤ í†µê³„ ì¡°íšŒ
GET    /api/service{N}/health                   # ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
```

### 4.2 ì¸ì¦/ì¸ê°€ í”Œë¡œìš°

#### 4.2.1 í†µí•© ê´€ë¦¬ì ì¸ì¦ í”Œë¡œìš°

```mermaid
sequenceDiagram
    participant Admin as ê´€ë¦¬ì
    participant UI as í†µí•© UI
    participant Gateway as API Gateway
    participant Auth as ì¸ì¦ ì„œë¹„ìŠ¤
    participant Unified as í†µí•© API
    participant MasterDB as í†µí•© DB
    participant Cache as Redis Cache

    Admin->>UI: ë¡œê·¸ì¸ ìš”ì²­
    UI->>Gateway: POST /api/unified/auth/login
    Gateway->>Auth: ì¸ì¦ ìš”ì²­ ì „ë‹¬
    Auth->>MasterDB: ê´€ë¦¬ì ê³„ì • ì¡°íšŒ
    MasterDB-->>Auth: ê³„ì • ì •ë³´
    Auth->>Auth: ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
    Auth->>MasterDB: ê¶Œí•œ ë° ì„¤ì • ì¡°íšŒ
    MasterDB-->>Auth: ê¶Œí•œ ì •ë³´ + ì„¤ì •
    Auth->>Auth: JWT í† í° ìƒì„±
    Auth->>Cache: í† í° ì €ì¥ (ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬ìš©)
    Auth-->>Gateway: JWT Token + Refresh Token
    Gateway-->>UI: í† í° + ì‚¬ìš©ì ì •ë³´ + ê¶Œí•œ

    Note over Admin,UI: í† í° ê°±ì‹  ì‹œ
    UI->>Gateway: POST /api/unified/auth/refresh
    Gateway->>Auth: Refresh Token ê²€ì¦
    Auth->>Cache: í† í° ìœ íš¨ì„± í™•ì¸
    Cache-->>Auth: í† í° ìƒíƒœ
    Auth->>Auth: ìƒˆ í† í° ìƒì„±
    Auth-->>Gateway: ìƒˆ JWT Token
    Gateway-->>UI: ìƒˆ í† í°

    Note over Admin,UI: ë¡œê·¸ì•„ì›ƒ ì‹œ
    UI->>Gateway: POST /api/unified/auth/logout
    Gateway->>Auth: ë¡œê·¸ì•„ì›ƒ ìš”ì²­
    Auth->>Cache: í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸ ë“±ë¡
    Auth-->>Gateway: ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ
    Gateway-->>UI: ì‘ë‹µ
```

#### 4.2.2 ì„œë¹„ìŠ¤ ì ‘ê·¼ ì¸ê°€ í”Œë¡œìš°

```mermaid
sequenceDiagram
    participant Admin as ê´€ë¦¬ì
    participant UI as í†µí•© UI
    participant Gateway as API Gateway
    participant Auth as ì¸ì¦ ì„œë¹„ìŠ¤
    participant Unified as í†µí•© API
    participant Service as ì„œë¹„ìŠ¤ API
    participant MasterDB as í†µí•© DB
    participant ServiceDB as ì„œë¹„ìŠ¤ DB
    participant Cache as Redis Cache

    Admin->>UI: Service1 ë°ì´í„° ìš”ì²­
    UI->>Gateway: GET /api/service1/board with JWT
    Gateway->>Auth: í† í° ê²€ì¦
    Auth->>Cache: í† í° ìƒíƒœ í™•ì¸
    Cache-->>Auth: í† í° ìœ íš¨ì„±
    Auth->>MasterDB: ê¶Œí•œ ì •ë³´ ì¡°íšŒ
    MasterDB-->>Auth: ê¶Œí•œ ì •ë³´
    Auth-->>Gateway: ê¶Œí•œ ê²€ì¦ ê²°ê³¼

    alt ê¶Œí•œ ìˆìŒ
        Gateway->>Service: ìš”ì²­ ì „ë‹¬
        Service->>ServiceDB: ë°ì´í„° ì¡°íšŒ
        ServiceDB-->>Service: ì›ë³¸ ë°ì´í„°
        Service->>Unified: ê¶Œí•œ ê¸°ë°˜ í•„í„°ë§ ìš”ì²­
        Unified->>MasterDB: ìƒì„¸ ê¶Œí•œ ê·œì¹™ ì¡°íšŒ
        MasterDB-->>Unified: ê¶Œí•œ ê·œì¹™
        Unified-->>Service: í•„í„°ë§ ê·œì¹™
        Service-->>Gateway: í•„í„°ë§ëœ ë°ì´í„°
        Gateway-->>UI: ì‘ë‹µ
    else ê¶Œí•œ ì—†ìŒ
        Gateway-->>UI: 403 Forbidden
    end

    Note over Gateway,Service: ëª¨ë“  ìš”ì²­ ë¡œê¹…
    Gateway->>Unified: í™œë™ ë¡œê·¸ ê¸°ë¡
    Unified->>MasterDB: ë¡œê·¸ ì €ì¥
```

#### 4.2.3 ê¶Œí•œ ìƒì† ë° ìš°ì„ ìˆœìœ„

1. **ê¶Œí•œ ìƒì† êµ¬ì¡°**

   - ì‹œìŠ¤í…œ ê¶Œí•œ > ì„œë¹„ìŠ¤ ê¶Œí•œ > ê·¸ë£¹ ê¶Œí•œ > ì‚¬ìš©ì ê¶Œí•œ
   - ìƒìœ„ ê·¸ë£¹ì˜ ê¶Œí•œì€ í•˜ìœ„ ê·¸ë£¹ì— ìƒì†
   - ëª…ì‹œì  ê±°ë¶€(DENY)ëŠ” í—ˆìš©(ALLOW)ë³´ë‹¤ ìš°ì„ 

2. **ê¶Œí•œ í‰ê°€ ìˆœì„œ**

   - ì‚¬ìš©ì ì§ì ‘ ê¶Œí•œ í™•ì¸
   - ì‚¬ìš©ì ì†Œì† ê·¸ë£¹ ê¶Œí•œ í™•ì¸
   - ìƒìœ„ ê·¸ë£¹ ê¶Œí•œ ìƒì† í™•ì¸
   - ì„œë¹„ìŠ¤ ê¸°ë³¸ ê¶Œí•œ í™•ì¸
   - ì‹œìŠ¤í…œ ê¸°ë³¸ ê¶Œí•œ í™•ì¸

3. **ìºì‹œ ì „ëµ**
   - ì‚¬ìš©ìë³„ ê¶Œí•œ ìºì‹œ (5ë¶„)
   - ê·¸ë£¹ ê¶Œí•œ ìºì‹œ (10ë¶„)
   - ì‹œìŠ¤í…œ ê¶Œí•œ ìºì‹œ (1ì‹œê°„)
   - ê¶Œí•œ ë³€ê²½ ì‹œ ê´€ë ¨ ìºì‹œ ì¦‰ì‹œ ë¬´íš¨í™”

````

---

## 5. í†µí•© í”„ë¡ íŠ¸ì—”ë“œ ì„¤ê³„

### 5.1 ê¸°ë³¸ êµ¬ì¡°

```mermaid
graph TD
    A[í†µí•© ê´€ë¦¬ UI] --> B[ë©”ì¸ í˜ì´ì§€]
    A --> C[ì„œë¹„ìŠ¤ ê´€ë¦¬]
    A --> D[ì½˜í…ì¸  ê´€ë¦¬]
    A --> E[ê´€ë¦¬ì/ê¶Œí•œ]
    A --> F[ì‹œìŠ¤í…œ ê´€ë¦¬]

    B --> B1[ì„œë¹„ìŠ¤ ëª©ë¡]
    B --> B2[ì„œë¹„ìŠ¤ ìƒíƒœ]
    B --> B3[ë¹ ë¥¸ ì•¡ì„¸ìŠ¤]

    C --> C1[ì„œë¹„ìŠ¤ ëª©ë¡]
    C --> C2[ì„œë¹„ìŠ¤ ì„¤ì •]
    C --> C3[API ê´€ë¦¬]
    C --> C4[ë°°í¬ ê´€ë¦¬]

    D --> D1[í†µí•© ê²Œì‹œíŒ]
    D --> D2[í†µí•© íŒì—…]
    D --> D3[ë©”ë‰´ ê´€ë¦¬]
    D --> D4[íŒŒì¼ ê´€ë¦¬]
    D --> D5[ë™ê¸°í™” ê´€ë¦¬]

    E --> E1[ê´€ë¦¬ì ê³„ì •]
    E --> E2[ê·¸ë£¹ ê´€ë¦¬]
    E --> E3[ì—­í•  ê´€ë¦¬]
    E --> E4[ê¶Œí•œ ì •ì±…]

    F --> F1[ì‹œìŠ¤í…œ ì„¤ì •]
    F --> F2[í™œë™ ë¡œê·¸]
    F --> F3[ë°±ì—…/ë³µêµ¬]
    F --> F4[ë³´ì•ˆ ì„¤ì •]
````

### 5.2 ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```typescript
// í†µí•© ê´€ë¦¬ í˜ì´ì§€ êµ¬ì¡°
/src/app/
â”œâ”€â”€ (auth)/                      // ì¸ì¦ ê´€ë ¨ í˜ì´ì§€
â”‚   â”œâ”€â”€ login/                   // ë¡œê·¸ì¸
â”‚   â””â”€â”€ logout/                  // ë¡œê·¸ì•„ì›ƒ
â”‚
â”œâ”€â”€ main/                        // ë©”ì¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ ServiceOverview.tsx
â”‚       â”œâ”€â”€ ServiceCard.tsx
â”‚       â””â”€â”€ QuickAccessPanel.tsx
â”‚
â”œâ”€â”€ services/                    // ì„œë¹„ìŠ¤ ê´€ë¦¬
â”‚   â”œâ”€â”€ [serviceId]/            // ì„œë¹„ìŠ¤ ìƒì„¸
â”‚   â”œâ”€â”€ settings/               // ì„œë¹„ìŠ¤ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â”œâ”€â”€ ServiceRegistration.tsx
â”‚   â”‚       â”œâ”€â”€ DatabaseConnectionTest.tsx
â”‚   â”‚       â””â”€â”€ ServiceHealthCheck.tsx
â”‚   â””â”€â”€ deployment/             // ë°°í¬ ê´€ë¦¬
â”‚
â”œâ”€â”€ content/                     // ì½˜í…ì¸  ê´€ë¦¬
â”‚   â”œâ”€â”€ board/                  // í†µí•© ê²Œì‹œíŒ
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â”œâ”€â”€ ContentUnifiedTable.tsx
â”‚   â”‚       â”œâ”€â”€ BulkActionPanel.tsx
â”‚   â”‚       â””â”€â”€ ServiceFilter.tsx
â”‚   â”œâ”€â”€ popup/                  // í†µí•© íŒì—…
â”‚   â”œâ”€â”€ menu/                   // ë©”ë‰´ ê´€ë¦¬
â”‚   â””â”€â”€ sync/                   // ë™ê¸°í™” ê´€ë¦¬
â”‚
â”œâ”€â”€ admin/                       // ê´€ë¦¬ì/ê¶Œí•œ
â”‚   â”œâ”€â”€ users/                  // ê´€ë¦¬ì ê³„ì •
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â”œâ”€â”€ AdminList.tsx
â”‚   â”‚       â”œâ”€â”€ PermissionMatrix.tsx
â”‚   â”‚       â””â”€â”€ ServiceAccessControl.tsx
â”‚   â”œâ”€â”€ groups/                 // ê·¸ë£¹ ê´€ë¦¬
â”‚   â”œâ”€â”€ roles/                  // ì—­í•  ê´€ë¦¬
â”‚   â””â”€â”€ permissions/            // ê¶Œí•œ ì •ì±…
â”‚
â””â”€â”€ system/                      // ì‹œìŠ¤í…œ ê´€ë¦¬
    â”œâ”€â”€ settings/               // ì‹œìŠ¤í…œ ì„¤ì •
    â”œâ”€â”€ logs/                   // í™œë™ ë¡œê·¸
    â”œâ”€â”€ backup/                 // ë°±ì—…/ë³µêµ¬
    â””â”€â”€ security/               // ë³´ì•ˆ ì„¤ì •
```

### 5.3 í•µì‹¬ ê¸°ëŠ¥ ì»´í¬ë„ŒíŠ¸

#### 5.3.1 ë©”ì¸ í˜ì´ì§€

```typescript
// components/dashboard/UnifiedDashboard.tsx
interface UnifiedMetrics {
  totalServices: number;
  totalContents: number;
  activePopups: number;
  todayActiveUsers: number;
  systemHealth: "HEALTHY" | "WARNING" | "ERROR";
  serviceStatuses: ServiceStatus[];
  contentSyncStatus: {
    pending: number;
    syncing: number;
    error: number;
    completed: number;
  };
  recentActivities: Activity[];
}

interface ServiceStatus {
  id: number;
  name: string;
  status: "ACTIVE" | "INACTIVE" | "MAINTENANCE";
  health: "HEALTHY" | "WARNING" | "ERROR";
  lastChecked: string;
  metrics: {
    cpu: number;
    memory: number;
    disk: number;
    activeUsers: number;
  };
}

export function UnifiedDashboard() {
  const { data: metrics, isLoading } = useUnifiedMetrics();
  const { data: services } = useServices();
  const { data: activities } = useRecentActivities();

  if (isLoading) {
    return <DashboardSkeleton />;
  }

  return (
    <VStack spacing={6} align="stretch">
      {/* ìƒë‹¨ ë©”íŠ¸ë¦­ ì¹´ë“œ */}
      <Grid templateColumns="repeat(4, 1fr)" gap={6}>
        <MetricCard
          title="ì´ ì„œë¹„ìŠ¤"
          value={metrics.totalServices}
          icon={<ServerIcon />}
          trend={{
            value: 5,
            direction: "up",
            label: "ì „ì›” ëŒ€ë¹„",
          }}
        />
        <MetricCard
          title="ì´ ì½˜í…ì¸ "
          value={metrics.totalContents}
          icon={<ContentIcon />}
          trend={{
            value: 12.5,
            direction: "up",
            label: "ì „ì›” ëŒ€ë¹„",
          }}
        />
        <MetricCard
          title="í™œì„± íŒì—…"
          value={metrics.activePopups}
          icon={<PopupIcon />}
        />
        <MetricCard
          title="ì˜¤ëŠ˜ ì‚¬ìš©ì"
          value={metrics.todayActiveUsers}
          icon={<UserIcon />}
          trend={{
            value: 8.3,
            direction: "up",
            label: "ì–´ì œ ëŒ€ë¹„",
          }}
        />
      </Grid>

      {/* ì„œë¹„ìŠ¤ ìƒíƒœ íŒ¨ë„ */}
      <Box p={6} bg="white" rounded="lg" shadow="sm">
        <HStack justify="space-between" mb={4}>
          <Heading size="md">ì„œë¹„ìŠ¤ ìƒíƒœ</Heading>
          <Button
            size="sm"
            leftIcon={<RefreshIcon />}
            onClick={() => refetch()}
          >
            ìƒˆë¡œê³ ì¹¨
          </Button>
        </HStack>
        <ServiceHealthPanel services={services} />
      </Box>

      {/* ì°¨íŠ¸ ë° í™œë™ ë¡œê·¸ */}
      <Grid templateColumns="repeat(2, 1fr)" gap={6}>
        <GridItem>
          <Box p={6} bg="white" rounded="lg" shadow="sm">
            <Heading size="md" mb={4}>
              ì½˜í…ì¸  ë™ê¸°í™” í˜„í™©
            </Heading>
            <ContentSyncChart data={metrics.contentSyncStatus} />
          </Box>
        </GridItem>

        <GridItem>
          <Box p={6} bg="white" rounded="lg" shadow="sm">
            <Heading size="md" mb={4}>
              ìµœê·¼ í™œë™
            </Heading>
            <RecentActivityFeed activities={activities} />
          </Box>
        </GridItem>
      </Grid>

      {/* ì•Œë¦¼ ì„¼í„° */}
      <Box p={6} bg="white" rounded="lg" shadow="sm">
        <Heading size="md" mb={4}>
          ì‹œìŠ¤í…œ ì•Œë¦¼
        </Heading>
        <AlertCenter />
      </Box>
    </VStack>
  );
}
```

#### 5.3.2 ê¶Œí•œ ê´€ë¦¬ ë§¤íŠ¸ë¦­ìŠ¤

```typescript
// components/admin/PermissionMatrix.tsx
interface PermissionMatrixProps {
  adminId: number;
  services: Service[];
  roles: Role[];
  permissions: Permission[];
  currentPermissions: AdminPermission[];
  onPermissionChange: (changes: PermissionChange) => Promise<void>;
}

interface PermissionChange {
  adminId: number;
  serviceId: number;
  roleId: number;
  permissions: {
    module: string;
    actions: string[];
  }[];
}

export function PermissionMatrix({
  adminId,
  services,
  roles,
  permissions,
  currentPermissions,
  onPermissionChange,
}: PermissionMatrixProps) {
  const [selectedService, setSelectedService] = useState<number | null>(null);
  const [selectedRole, setSelectedRole] = useState<number | null>(null);
  const [changes, setChanges] = useState<PermissionChange[]>([]);
  const toast = useToast();

  // ê¶Œí•œ ë³€ê²½ ì²˜ë¦¬
  const handlePermissionToggle = async (
    module: string,
    action: string,
    checked: boolean
  ) => {
    const newChanges = [...changes];
    const changeIndex = newChanges.findIndex(
      (c) => c.serviceId === selectedService && c.roleId === selectedRole
    );

    if (changeIndex === -1) {
      newChanges.push({
        adminId,
        serviceId: selectedService!,
        roleId: selectedRole!,
        permissions: [
          {
            module,
            actions: [action],
          },
        ],
      });
    } else {
      const moduleIndex = newChanges[changeIndex].permissions.findIndex(
        (p) => p.module === module
      );
      if (moduleIndex === -1) {
        newChanges[changeIndex].permissions.push({
          module,
          actions: [action],
        });
      } else {
        const actions =
          newChanges[changeIndex].permissions[moduleIndex].actions;
        if (checked) {
          actions.push(action);
        } else {
          const actionIndex = actions.indexOf(action);
          if (actionIndex !== -1) {
            actions.splice(actionIndex, 1);
          }
        }
      }
    }

    setChanges(newChanges);
  };

  // ê¶Œí•œ ë³€ê²½ ì €ì¥
  const handleSave = async () => {
    try {
      await onPermissionChange(changes[0]);
      toast({
        title: "ê¶Œí•œì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.",
        status: "success",
      });
      setChanges([]);
    } catch (error) {
      toast({
        title: "ê¶Œí•œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨",
        description: error.message,
        status: "error",
      });
    }
  };

  return (
    <VStack spacing={6} align="stretch">
      {/* ì„œë¹„ìŠ¤ ë° ì—­í•  ì„ íƒ */}
      <HStack spacing={4}>
        <FormControl>
          <FormLabel>ì„œë¹„ìŠ¤</FormLabel>
          <Select
            value={selectedService || ""}
            onChange={(e) => setSelectedService(Number(e.target.value))}
          >
            <option value="">ì„œë¹„ìŠ¤ ì„ íƒ</option>
            {services.map((service) => (
              <option key={service.id} value={service.id}>
                {service.name}
              </option>
            ))}
          </Select>
        </FormControl>

        <FormControl>
          <FormLabel>ì—­í• </FormLabel>
          <Select
            value={selectedRole || ""}
            onChange={(e) => setSelectedRole(Number(e.target.value))}
            isDisabled={!selectedService}
          >
            <option value="">ì—­í•  ì„ íƒ</option>
            {roles.map((role) => (
              <option key={role.id} value={role.id}>
                {role.name}
              </option>
            ))}
          </Select>
        </FormControl>
      </HStack>

      {/* ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤ */}
      {selectedService && selectedRole && (
        <Box overflowX="auto">
          <Table>
            <Thead>
              <Tr>
                <Th>ëª¨ë“ˆ</Th>
                <Th>ì¡°íšŒ</Th>
                <Th>ìƒì„±</Th>
                <Th>ìˆ˜ì •</Th>
                <Th>ì‚­ì œ</Th>
                <Th>ìŠ¹ì¸</Th>
              </Tr>
            </Thead>
            <Tbody>
              {permissions.map((permission) => (
                <Tr key={permission.module}>
                  <Td>{permission.moduleName}</Td>
                  {["read", "create", "update", "delete", "approve"].map(
                    (action) => (
                      <Td key={action}>
                        <Checkbox
                          isChecked={hasPermission(
                            currentPermissions,
                            permission.module,
                            action
                          )}
                          onChange={(e) =>
                            handlePermissionToggle(
                              permission.module,
                              action,
                              e.target.checked
                            )
                          }
                        />
                      </Td>
                    )
                  )}
                </Tr>
              ))}
            </Tbody>
          </Table>
        </Box>
      )}

      {/* ì €ì¥ ë²„íŠ¼ */}
      {changes.length > 0 && (
        <Button colorScheme="blue" onClick={handleSave} isLoading={isSaving}>
          ê¶Œí•œ ë³€ê²½ ì €ì¥
        </Button>
      )}
    </VStack>
  );
}
```

### 5.4 ê¸°ìˆ  ìŠ¤íƒ

1. **í”„ë ˆì„ì›Œí¬ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬**

   - Next.js 14 (App Router)
   - React 18 (Server Components)
   - TypeScript 5
   - Chakra UI (ë””ìì¸ ì‹œìŠ¤í…œ)
   - TanStack Query (API ìƒíƒœ ê´€ë¦¬)
   - Zustand (ì „ì—­ ìƒíƒœ ê´€ë¦¬)
   - React Hook Form (í¼ ê´€ë¦¬)
   - Zod (ë°ì´í„° ê²€ì¦)

2. **ë°ì´í„° ì‹œê°í™”**

   - AG Grid Enterprise (ë°ì´í„° ê·¸ë¦¬ë“œ)
   - Chart.js (ì°¨íŠ¸/ê·¸ë˜í”„)
   - React Flow (ë‹¤ì´ì–´ê·¸ë¨)
   - React Calendar (ì¼ì • ê´€ë¦¬)

3. **ìœ í‹¸ë¦¬í‹°**

   - date-fns (ë‚ ì§œ ì²˜ë¦¬)
   - axios (HTTP í´ë¼ì´ì–¸íŠ¸)
   - lodash-es (ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜)
   - i18next (ë‹¤êµ­ì–´ ì§€ì›)

4. **ê°œë°œ ë„êµ¬**
   - ESLint (ì½”ë“œ í’ˆì§ˆ)
   - Prettier (ì½”ë“œ í¬ë§·íŒ…)
   - Jest (ë‹¨ìœ„ í…ŒìŠ¤íŠ¸)
   - Cypress (E2E í…ŒìŠ¤íŠ¸)
   - Storybook (ì»´í¬ë„ŒíŠ¸ ë¬¸ì„œí™”)

### 5.5 ìƒíƒœ ê´€ë¦¬ ì „ëµ

1. **ì „ì—­ ìƒíƒœ (Zustand)**

   ```typescript
   // stores/auth.ts
   interface AuthState {
     user: User | null;
     permissions: Permission[];
     isAuthenticated: boolean;
     login: (credentials: Credentials) => Promise<void>;
     logout: () => Promise<void>;
     refreshToken: () => Promise<void>;
   }

   // stores/service.ts
   interface ServiceState {
     currentService: Service | null;
     services: Service[];
     setCurrentService: (service: Service) => void;
     updateService: (service: Service) => Promise<void>;
     syncService: (serviceId: number) => Promise<void>;
   }

   // stores/ui.ts
   interface UIState {
     sidebarOpen: boolean;
     theme: "light" | "dark";
     language: string;
     notifications: Notification[];
     toggleSidebar: () => void;
     setTheme: (theme: "light" | "dark") => void;
     addNotification: (notification: Notification) => void;
   }
   ```

2. **API ìƒíƒœ (TanStack Query)**

   ```typescript
   // lib/query/config.ts
   const queryClient = new QueryClient({
     defaultOptions: {
       queries: {
         staleTime: 5 * 60 * 1000, // 5ë¶„
         cacheTime: 30 * 60 * 1000, // 30ë¶„
         retry: 3,
         refetchOnWindowFocus: false,
       },
       mutations: {
         retry: 2,
       },
     },
   });

   // hooks/queries/useServiceData.ts
   export const useServiceData = (serviceId: number) => {
     return useQuery({
       queryKey: ["service", serviceId],
       queryFn: () => fetchServiceDetails(serviceId),
       enabled: !!serviceId,
     });
   };

   // hooks/queries/useContentSync.ts
   export const useContentSync = (serviceId: number) => {
     const queryClient = useQueryClient();

     return useMutation({
       mutationFn: syncServiceContent,
       onSuccess: () => {
         queryClient.invalidateQueries({
           queryKey: ["content", serviceId],
         });
       },
     });
   };
   ```

3. **ë¡œì»¬ ìƒíƒœ (React Hook Form)**

   ```typescript
   // components/forms/ServiceForm.tsx
   const { register, handleSubmit, control, formState } = useForm<ServiceForm>({
     resolver: zodResolver(serviceSchema),
     defaultValues: {
       name: "",
       domain: "",
       status: "ACTIVE",
       settings: defaultSettings,
     },
   });

   // components/forms/AdminForm.tsx
   const methods = useFormContext<AdminFormData>();
   const { fields, append, remove } = useFieldArray({
     control: methods.control,
     name: "permissions",
   });
   ```

### 5.6 ì„±ëŠ¥ ìµœì í™”

1. **ì½”ë“œ ë¶„í• **

   - ë™ì  ì„í¬íŠ¸ë¥¼ í†µí•œ ì§€ì—° ë¡œë”©

   ```typescript
   const DynamicChart = dynamic(
     () => import("@/components/charts/ServiceChart"),
     {
       loading: () => <ChartSkeleton />,
       ssr: false,
     }
   );
   ```

   - ë¼ìš°íŠ¸ ê¸°ë°˜ ì½”ë“œ ë¶„í• 

   ```typescript
   // app/services/[serviceId]/page.tsx
   import { Suspense } from "react";
   import { ServiceDetails } from "@/components/services/ServiceDetails";
   import { ServiceDetailsSkeleton } from "@/components/skeletons";

   export default function ServicePage({ params }) {
     return (
       <Suspense fallback={<ServiceDetailsSkeleton />}>
         <ServiceDetails serviceId={params.serviceId} />
       </Suspense>
     );
   }
   ```

   - ëŒ€í˜• ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ë“ˆí™”

   ```typescript
   // components/dashboard/index.ts
   export * from "./MetricCard";
   export * from "./ServiceHealthPanel";
   export * from "./ContentSyncChart";
   export * from "./RecentActivityFeed";
   export * from "./AlertCenter";
   ```

2. **ë°ì´í„° ìµœì í™”**

   - ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•œ ë°ì´í„° í”„ë¦¬í˜ì¹­

   ```typescript
   // app/services/page.tsx
   import { Suspense } from "react";
   import { ServiceList } from "@/components/services/ServiceList";
   import { getServices } from "@/lib/api/services";

   export default async function ServicesPage() {
     const services = await getServices();
     return (
       <Suspense>
         <ServiceList initialData={services} />
       </Suspense>
     );
   }
   ```

   - ìŠ¤íŠ¸ë¦¬ë° ë° Suspense í™œìš©

   ```typescript
   // components/dashboard/DashboardContent.tsx
   export function DashboardContent() {
     return (
       <Grid templateColumns="repeat(4, 1fr)" gap={6}>
         <Suspense fallback={<MetricsSkeleton />}>
           <UnifiedMetrics />
         </Suspense>
         <Suspense fallback={<ServicesSkeleton />}>
           <ServiceHealthPanel />
         </Suspense>
         <Suspense fallback={<ChartSkeleton />}>
           <ContentSyncChart />
         </Suspense>
       </Grid>
     );
   }
   ```

   - ë¬´í•œ ìŠ¤í¬ë¡¤ ë° ê°€ìƒí™” ì ìš©

   ```typescript
   // components/content/ContentList.tsx
   export function ContentList() {
     const { data, fetchNextPage, hasNextPage } = useInfiniteQuery({
       queryKey: ["contents"],
       queryFn: fetchContents,
       getNextPageParam: (lastPage) => lastPage.nextCursor,
     });

     return (
       <VirtualizedList
         height={800}
         itemCount={data?.pages.length * 20}
         itemSize={50}
         onItemsRendered={({ visibleStopIndex }) => {
           if (visibleStopIndex > data?.pages.length * 20 - 10) {
             fetchNextPage();
           }
         }}
       >
         {({ index, style }) => (
           <ContentListItem
             content={data?.pages[Math.floor(index / 20)].items[index % 20]}
             style={style}
           />
         )}
       </VirtualizedList>
     );
   }
   ```

3. **ìºì‹œ ì „ëµ**

   - ë¸Œë¼ìš°ì € ìºì‹œ í™œìš©

   ```typescript
   // next.config.js
   module.exports = {
     async headers() {
       return [
         {
           source: "/api/services/:serviceId/stats",
           headers: [
             {
               key: "Cache-Control",
               value: "public, max-age=300, stale-while-revalidate=60",
             },
           ],
         },
       ];
     },
   };
   ```

   - API ì‘ë‹µ ìºì‹±

   ```typescript
   // lib/api/cache.ts
   export const getServiceStats = async (serviceId: number) => {
     const cacheKey = `service-stats-${serviceId}`;
     const cachedData = await redis.get(cacheKey);

     if (cachedData) {
       return JSON.parse(cachedData);
     }

     const stats = await fetchServiceStats(serviceId);
     await redis.setex(cacheKey, 300, JSON.stringify(stats));

     return stats;
   };
   ```

   - ì •ì  ìì‚° ìºì‹±

   ```typescript
   // next.config.js
   module.exports = {
     images: {
       domains: ["assets.example.com"],
       minimumCacheTTL: 60,
     },
     staticPageGenerationTimeout: 120,
   };
   ```

4. **ë Œë”ë§ ìµœì í™”**

   - ë©”ëª¨ì´ì œì´ì…˜ í™œìš©

   ```typescript
   // hooks/useFilteredContent.ts
   export function useFilteredContent(contents: Content[], filters: Filters) {
     return useMemo(() => {
       return contents.filter((content) => {
         return (
           (!filters.status || content.status === filters.status) &&
           (!filters.type || content.type === filters.type) &&
           (!filters.service || content.serviceId === filters.service)
         );
       });
     }, [contents, filters]);
   }
   ```

   - ì»´í¬ë„ŒíŠ¸ ì§€ì—° ë¡œë”©

   ```typescript
   // components/charts/index.ts
   export const ServiceChart = dynamic(() => import("./ServiceChart"), {
     loading: () => <ChartSkeleton />,
     ssr: false,
   });

   export const ContentChart = dynamic(() => import("./ContentChart"), {
     loading: () => <ChartSkeleton />,
     ssr: false,
   });
   ```

   - ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€

   ```typescript
   // components/common/MetricCard.tsx
   export const MetricCard = memo(function MetricCard({
     title,
     value,
     trend,
     icon,
   }: MetricCardProps) {
     return (
       <Box p={4} bg="white" rounded="lg" shadow="sm">
         <HStack spacing={4}>
           {icon}
           <VStack align="start" spacing={1}>
             <Text fontSize="sm" color="gray.500">
               {title}
             </Text>
             <Text fontSize="2xl" fontWeight="bold">
               {value}
             </Text>
             {trend && (
               <TrendIndicator
                 value={trend.value}
                 direction={trend.direction}
                 label={trend.label}
               />
             )}
           </VStack>
         </HStack>
       </Box>
     );
   });
   ```

````

## 6. ë°°í¬ ë° ìš´ì˜

### 6.1 ë°°í¬ ì•„í‚¤í…ì²˜

```mermaid
graph TD
    A[ê°œë°œì] --> B[Git Repository]
    B --> C[CI/CD Pipeline]

    C --> D[ë¹Œë“œ ë‹¨ê³„]
    D --> D1[í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ]
    D --> D2[ë°±ì—”ë“œ ë¹Œë“œ]
    D --> D3[DB ë§ˆì´ê·¸ë ˆì´ì…˜]

    C --> E[í…ŒìŠ¤íŠ¸ ë‹¨ê³„]
    E --> E1[ë‹¨ìœ„ í…ŒìŠ¤íŠ¸]
    E --> E2[í†µí•© í…ŒìŠ¤íŠ¸]
    E --> E3[E2E í…ŒìŠ¤íŠ¸]

    C --> F[ë°°í¬ ë‹¨ê³„]
    F --> F1[ìŠ¤í…Œì´ì§• ë°°í¬]
    F --> F2[í”„ë¡œë•ì…˜ ë°°í¬]

    F1 --> G1[ìŠ¤í…Œì´ì§• í™˜ê²½]
    F2 --> G2[í”„ë¡œë•ì…˜ í™˜ê²½]

    G1 --> H1[ìŠ¤í…Œì´ì§• ëª¨ë‹ˆí„°ë§]
    G2 --> H2[í”„ë¡œë•ì…˜ ëª¨ë‹ˆí„°ë§]
````

### 6.2 ë°°í¬ í”„ë¡œì„¸ìŠ¤

1. **CI/CD íŒŒì´í”„ë¼ì¸**

   ```yaml
   # .github/workflows/deploy.yml
   name: Deploy Pipeline

   on:
     push:
       branches: [main, develop]
     pull_request:
       branches: [main, develop]

   jobs:
     build:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v3

         # í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ
         - name: Setup Node.js
           uses: actions/setup-node@v3
           with:
             node-version: "18"
             cache: "npm"
             cache-dependency-path: client/package-lock.json

         - name: Install Frontend Dependencies
           run: cd client && npm ci

         - name: Build Frontend
           run: cd client && npm run build

         # ë°±ì—”ë“œ ë¹Œë“œ
         - name: Setup Java
           uses: actions/setup-java@v3
           with:
             java-version: "17"
             distribution: "temurin"
             cache: "maven"

         - name: Build Backend
           run: cd server && mvn clean package

         # í…ŒìŠ¤íŠ¸ ì‹¤í–‰
         - name: Run Tests
           run: |
             cd client && npm test
             cd ../server && mvn test

         # ë„ì»¤ ì´ë¯¸ì§€ ë¹Œë“œ
         - name: Build Docker Images
           run: |
             docker build -t unified-cms-frontend ./client
             docker build -t unified-cms-backend ./server

         # ì´ë¯¸ì§€ í‘¸ì‹œ
         - name: Push Docker Images
           run: |
             docker push unified-cms-frontend
             docker push unified-cms-backend

     deploy-staging:
       needs: build
       if: github.ref == 'refs/heads/develop'
       runs-on: ubuntu-latest
       steps:
         - name: Deploy to Staging
           uses: some-deploy-action@v1
           with:
             environment: staging

     deploy-production:
       needs: [build, deploy-staging]
       if: github.ref == 'refs/heads/main'
       runs-on: ubuntu-latest
       steps:
         - name: Deploy to Production
           uses: some-deploy-action@v1
           with:
             environment: production
   ```

2. **í™˜ê²½ë³„ ì„¤ì • ê´€ë¦¬**

   ```yaml
   # config/staging.yml
   environment: staging
   domain: staging.unified-cms.com

   database:
     master:
       host: staging-db.unified-cms.com
       port: 3306
       name: unified_cms

   redis:
     host: staging-redis.unified-cms.com
     port: 6379

   logging:
     level: DEBUG
     path: /var/log/unified-cms

   monitoring:
     enabled: true
     endpoint: https://monitoring.unified-cms.com

   # config/production.yml
   environment: production
   domain: unified-cms.com

   database:
     master:
       host: prod-db.unified-cms.com
       port: 3306
       name: unified_cms

   redis:
     host: prod-redis.unified-cms.com
     port: 6379

   logging:
     level: INFO
     path: /var/log/unified-cms

   monitoring:
     enabled: true
     endpoint: https://monitoring.unified-cms.com
   ```

### 6.3 ìš´ì˜ ëª¨ë‹ˆí„°ë§

1. **ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§**

   ```typescript
   // lib/monitoring/system.ts
   interface SystemMetrics {
     cpu: {
       usage: number;
       load: number[];
     };
     memory: {
       total: number;
       used: number;
       free: number;
     };
     disk: {
       total: number;
       used: number;
       free: number;
     };
     network: {
       incoming: number;
       outgoing: number;
     };
   }

   // ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
   export async function collectSystemMetrics(): Promise<SystemMetrics> {
     const metrics = await Promise.all([
       getCPUMetrics(),
       getMemoryMetrics(),
       getDiskMetrics(),
       getNetworkMetrics(),
     ]);

     return {
       cpu: metrics[0],
       memory: metrics[1],
       disk: metrics[2],
       network: metrics[3],
     };
   }
   ```

2. **ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë‹ˆí„°ë§**

   ```typescript
   // lib/monitoring/application.ts
   interface AppMetrics {
     activeUsers: number;
     requestCount: number;
     errorCount: number;
     responseTime: number;
     activeServices: number;
     syncStatus: {
       pending: number;
       processing: number;
       completed: number;
       failed: number;
     };
   }

   // ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
   export async function collectAppMetrics(): Promise<AppMetrics> {
     const metrics = await Promise.all([
       getUserMetrics(),
       getRequestMetrics(),
       getErrorMetrics(),
       getPerformanceMetrics(),
       getServiceMetrics(),
       getSyncMetrics(),
     ]);

     return {
       activeUsers: metrics[0],
       requestCount: metrics[1],
       errorCount: metrics[2],
       responseTime: metrics[3],
       activeServices: metrics[4],
       syncStatus: metrics[5],
     };
   }
   ```

3. **ì•Œë¦¼ ì„¤ì •**

   ```typescript
   // lib/monitoring/alerts.ts
   interface AlertRule {
     metric: string;
     condition: "gt" | "lt" | "eq";
     threshold: number;
     duration: number;
     severity: "info" | "warning" | "critical";
     channels: string[];
   }

   const alertRules: AlertRule[] = [
     {
       metric: "cpu.usage",
       condition: "gt",
       threshold: 80,
       duration: 300,
       severity: "warning",
       channels: ["slack", "email"],
     },
     {
       metric: "memory.used",
       condition: "gt",
       threshold: 90,
       duration: 300,
       severity: "critical",
       channels: ["slack", "email", "sms"],
     },
     {
       metric: "error.rate",
       condition: "gt",
       threshold: 5,
       duration: 60,
       severity: "critical",
       channels: ["slack", "email"],
     },
     {
       metric: "sync.failed",
       condition: "gt",
       threshold: 10,
       duration: 900,
       severity: "warning",
       channels: ["slack"],
     },
   ];
   ```

### 6.4 ì¥ì•  ëŒ€ì‘

1. **ì¥ì•  ê°ì§€ ë° ë³µêµ¬**

   ```typescript
   // lib/monitoring/recovery.ts
   interface FailoverConfig {
     service: string;
     healthCheck: {
       endpoint: string;
       interval: number;
       timeout: number;
       failureThreshold: number;
     };
     recovery: {
       strategy: "restart" | "failover" | "manual";
       timeout: number;
       maxAttempts: number;
     };
   }

   // ì„œë¹„ìŠ¤ ì¥ì•  ê°ì§€ ë° ë³µêµ¬
   export class ServiceFailoverManager {
     private configs: Map<string, FailoverConfig> = new Map();

     async monitorService(config: FailoverConfig) {
       let failures = 0;

       while (true) {
         try {
           const health = await this.checkServiceHealth(config);

           if (!health.isHealthy) {
             failures++;

             if (failures >= config.healthCheck.failureThreshold) {
               await this.handleServiceFailure(config);
               failures = 0;
             }
           } else {
             failures = 0;
           }
         } catch (error) {
           console.error(`Error monitoring service ${config.service}:`, error);
         }

         await sleep(config.healthCheck.interval);
       }
     }

     private async handleServiceFailure(config: FailoverConfig) {
       const { recovery } = config;

       switch (recovery.strategy) {
         case "restart":
           await this.restartService(config.service);
           break;

         case "failover":
           await this.failoverToStandby(config.service);
           break;

         case "manual":
           await this.notifyOperators(config.service);
           break;
       }
     }
   }
   ```

2. **ë°±ì—… ë° ë³µêµ¬**

   ```typescript
   // lib/backup/manager.ts
   interface BackupConfig {
     type: "full" | "incremental";
     target: "database" | "files" | "all";
     schedule: string;
     retention: {
       count: number;
       days: number;
     };
     storage: {
       type: "s3" | "gcs" | "local";
       path: string;
     };
   }

   // ë°±ì—… ê´€ë¦¬ì
   export class BackupManager {
     async createBackup(config: BackupConfig) {
       const backupId = generateBackupId();

       try {
         // ë°±ì—… ì‹œì‘ ë¡œê¹…
         await this.logBackupStart(backupId, config);

         // ë°±ì—… ìˆ˜í–‰
         if (config.target === "database" || config.target === "all") {
           await this.backupDatabase(backupId, config);
         }

         if (config.target === "files" || config.target === "all") {
           await this.backupFiles(backupId, config);
         }

         // ë°±ì—… ë©”íƒ€ë°ì´í„° ì €ì¥
         await this.saveBackupMetadata(backupId, config);

         // ì˜¤ë˜ëœ ë°±ì—… ì •ë¦¬
         await this.cleanupOldBackups(config);

         return {
           backupId,
           status: "success",
           timestamp: new Date(),
         };
       } catch (error) {
         // ì‹¤íŒ¨ ì²˜ë¦¬
         await this.handleBackupFailure(backupId, error);
         throw error;
       }
     }

     async restoreBackup(backupId: string) {
       const metadata = await this.getBackupMetadata(backupId);

       try {
         // ë³µêµ¬ ì‹œì‘ ë¡œê¹…
         await this.logRestoreStart(backupId);

         // ë°ì´í„°ë² ì´ìŠ¤ ë³µêµ¬
         if (metadata.target === "database" || metadata.target === "all") {
           await this.restoreDatabase(backupId);
         }

         // íŒŒì¼ ë³µêµ¬
         if (metadata.target === "files" || metadata.target === "all") {
           await this.restoreFiles(backupId);
         }

         return {
           status: "success",
           timestamp: new Date(),
         };
       } catch (error) {
         // ì‹¤íŒ¨ ì²˜ë¦¬
         await this.handleRestoreFailure(backupId, error);
         throw error;
       }
     }
   }
   ```

### 6.5 ë³´ì•ˆ ì„¤ì •

1. **ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ**

   ```typescript
   // config/security/network.ts
   export const networkSecurityConfig = {
     // CORS ì„¤ì •
     cors: {
       origin: ["https://unified-cms.com"],
       methods: ["GET", "POST", "PUT", "DELETE"],
       allowedHeaders: ["Content-Type", "Authorization"],
       credentials: true,
     },

     // ë ˆì´íŠ¸ ë¦¬ë¯¸íŒ…
     rateLimit: {
       windowMs: 15 * 60 * 1000, // 15ë¶„
       max: 100, // IPë‹¹ ìµœëŒ€ ìš”ì²­ ìˆ˜
       message: "ë„ˆë¬´ ë§ì€ ìš”ì²­ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.",
     },

     // HTTPS ì„¤ì •
     https: {
       enabled: true,
       hsts: {
         maxAge: 31536000,
         includeSubDomains: true,
         preload: true,
       },
     },

     // í”„ë¡ì‹œ ì„¤ì •
     proxy: {
       trusted: ["127.0.0.1", "10.0.0.0/8"],
     },
   };
   ```

2. **ë³´ì•ˆ í—¤ë”**

   ```typescript
   // middleware/security.ts
   export const securityHeaders = {
     "Content-Security-Policy": `
       default-src 'self';
       script-src 'self' 'unsafe-inline' 'unsafe-eval';
       style-src 'self' 'unsafe-inline';
       img-src 'self' data: https:;
       font-src 'self' data:;
       connect-src 'self' https://api.unified-cms.com;
     `,
     "X-Content-Type-Options": "nosniff",
     "X-Frame-Options": "DENY",
     "X-XSS-Protection": "1; mode=block",
     "Referrer-Policy": "strict-origin-when-cross-origin",
     "Permissions-Policy": "camera=(), microphone=(), geolocation=()",
   };
   ```

3. **ë°ì´í„° ì•”í˜¸í™”**

   ```typescript
   // lib/security/encryption.ts
   interface EncryptionConfig {
     algorithm: "aes-256-gcm";
     keySize: 32;
     ivSize: 12;
     tagSize: 16;
   }

   export class DataEncryption {
     private readonly config: EncryptionConfig = {
       algorithm: "aes-256-gcm",
       keySize: 32,
       ivSize: 12,
       tagSize: 16,
     };

     // ë°ì´í„° ì•”í˜¸í™”
     async encrypt(data: string, key: Buffer): Promise<string> {
       const iv = crypto.randomBytes(this.config.ivSize);
       const cipher = crypto.createCipheriv(this.config.algorithm, key, iv, {
         authTagLength: this.config.tagSize,
       });

       const encrypted = Buffer.concat([
         cipher.update(data, "utf8"),
         cipher.final(),
       ]);

       const tag = cipher.getAuthTag();

       return Buffer.concat([iv, tag, encrypted]).toString("base64");
     }

     // ë°ì´í„° ë³µí˜¸í™”
     async decrypt(encryptedData: string, key: Buffer): Promise<string> {
       const data = Buffer.from(encryptedData, "base64");

       const iv = data.slice(0, this.config.ivSize);
       const tag = data.slice(
         this.config.ivSize,
         this.config.ivSize + this.config.tagSize
       );
       const encrypted = data.slice(this.config.ivSize + this.config.tagSize);

       const decipher = crypto.createDecipheriv(
         this.config.algorithm,
         key,
         iv,
         { authTagLength: this.config.tagSize }
       );

       decipher.setAuthTag(tag);

       return Buffer.concat([
         decipher.update(encrypted),
         decipher.final(),
       ]).toString("utf8");
     }
   }
   ```

## 7. ê²°ë¡  ë° í–¥í›„ ê³„íš

### 7.1 ì£¼ìš” ê°œì„ ì‚¬í•­

1. **í†µí•© ê´€ë¦¬ ê¸°ëŠ¥**

   - ë‹¤ì¤‘ CMS ì„œë¹„ìŠ¤ì˜ ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬
   - í†µí•© ëŒ€ì‹œë³´ë“œë¥¼ í†µí•œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
   - ì„œë¹„ìŠ¤ ê°„ ì½˜í…ì¸  ë™ê¸°í™”

2. **ë³´ì•ˆ ê°•í™”**

   - RBAC + ABAC í•˜ì´ë¸Œë¦¬ë“œ ê¶Œí•œ ëª¨ë¸
   - ë°ì´í„° ì•”í˜¸í™” ë° ë³´ì•ˆ ê°•í™”
   - ê°ì‚¬ ë¡œê·¸ ë° í™œë™ ì¶”ì 

3. **ìš´ì˜ íš¨ìœ¨ì„±**
   - ìë™í™”ëœ ë°°í¬ í”„ë¡œì„¸ìŠ¤
   - ì¥ì•  ê°ì§€ ë° ìë™ ë³µêµ¬
   - ë°±ì—… ë° ë³µêµ¬ ì²´ê³„

### 7.2 í–¥í›„ ê³„íš

1. **1ë‹¨ê³„ (3ê°œì›”)**

   - ê¸°ë³¸ í†µí•© ê´€ë¦¬ ê¸°ëŠ¥ êµ¬í˜„
   - í•µì‹¬ ë³´ì•ˆ ê¸°ëŠ¥ êµ¬í˜„
   - ì´ˆê¸° ì„œë¹„ìŠ¤ ì—°ë™

2. **2ë‹¨ê³„ (6ê°œì›”)**

   - ê³ ê¸‰ ëª¨ë‹ˆí„°ë§ ê¸°ëŠ¥ ì¶”ê°€
   - ìë™í™”ëœ ì¥ì•  ë³µêµ¬ êµ¬í˜„
   - ì¶”ê°€ ì„œë¹„ìŠ¤ ì—°ë™

3. **3ë‹¨ê³„ (12ê°œì›”)**
   - AI ê¸°ë°˜ ì´ìƒ ê°ì§€
   - ê³ ê¸‰ ë¶„ì„ ë° ë¦¬í¬íŒ…
   - ì„œë¹„ìŠ¤ í™•ì¥ ë° ìµœì í™”

### 7.3 ê¸°ëŒ€íš¨ê³¼

1. **ìš´ì˜ íš¨ìœ¨ì„±**

   - ê´€ë¦¬ ì‘ì—… ì‹œê°„ 50% ê°ì†Œ
   - ì¥ì•  ëŒ€ì‘ ì‹œê°„ 60% ë‹¨ì¶•
   - ë¦¬ì†ŒìŠ¤ í™œìš©ë¥  30% ê°œì„ 

2. **ë³´ì•ˆ ê°•í™”**

   - ë³´ì•ˆ ì‚¬ê³  ìœ„í—˜ 70% ê°ì†Œ
   - ê·œì • ì¤€ìˆ˜ìœ¨ 100% ë‹¬ì„±
   - ë°ì´í„° ìœ ì¶œ ìœ„í—˜ ìµœì†Œí™”

3. **ì‚¬ìš©ì ê²½í—˜**
   - ì„œë¹„ìŠ¤ ê°€ìš©ì„± 99.9% ë‹¬ì„±
   - ì‘ë‹µ ì‹œê°„ 40% ê°œì„ 
   - ì‚¬ìš©ì ë§Œì¡±ë„ í–¥ìƒ

---

## ë¶€ë¡

### A. ë¬¸ì„œ ì´ë ¥

| ë²„ì „  | ë‚ ì§œ       | ì‘ì„±ì     | ë³€ê²½ ë‚´ìš©                  |
| ----- | ---------- | ---------- | -------------------------- |
| 1.0.0 | 2024-03-01 | ì•„í‚¤í…ì²˜íŒ€ | ì´ˆê¸° ë²„ì „ ì‘ì„±             |
| 1.1.0 | 2024-03-15 | ì•„í‚¤í…ì²˜íŒ€ | ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ìƒì„¸í™”   |
| 1.2.0 | 2024-03-20 | ì•„í‚¤í…ì²˜íŒ€ | API ì„¤ê³„ ë° ë³´ì•ˆ ì •ì±… ì¶”ê°€ |

### B. ìš©ì–´ ì •ë¦¬

| ìš©ì–´        | ì„¤ëª…                                                           |
| ----------- | -------------------------------------------------------------- |
| RBAC        | Role-Based Access Control, ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´                 |
| ABAC        | Attribute-Based Access Control, ì†ì„± ê¸°ë°˜ ì ‘ê·¼ ì œì–´            |
| CMS         | Content Management System, ì½˜í…ì¸  ê´€ë¦¬ ì‹œìŠ¤í…œ                  |
| API Gateway | ë‹¤ì¤‘ ì„œë¹„ìŠ¤ì˜ APIë¥¼ í†µí•© ê´€ë¦¬í•˜ëŠ” ì¤‘ì•™ ê²Œì´íŠ¸ì›¨ì´              |
| CI/CD       | Continuous Integration/Continuous Deployment, ì§€ì†ì  í†µí•©/ë°°í¬ |

### C. ì°¸ê³  ë¬¸ì„œ

1. [ì „ìì •ë¶€ í‘œì¤€í”„ë ˆì„ì›Œí¬ ê°€ì´ë“œ](https://www.egovframe.go.kr/guide/guide.jsp)
2. [Spring Cloud Gateway ë¬¸ì„œ](https://spring.io/projects/spring-cloud-gateway)
3. [Next.js ê³µì‹ ë¬¸ì„œ](https://nextjs.org/docs)
4. [OWASP ë³´ì•ˆ ê°€ì´ë“œë¼ì¸](https://owasp.org/www-project-web-security-testing-guide/)

````

### 6.1 ë‹¤ì¤‘ ë ˆë²¨ ë³´ì•ˆ

#### 6.1.1 ë„¤íŠ¸ì›Œí¬ ë ˆë²¨

```nginx
# Nginx ì„¤ì • - IP ê¸°ë°˜ ì ‘ê·¼ ì œì–´
server {
    listen 443 ssl;
    server_name unified-cms.domain.com;

    # ê´€ë¦¬ì IPë§Œ í—ˆìš©
    allow 192.168.1.0/24;
    allow 10.0.0.0/8;
    deny all;

    location /api/unified/ {
        proxy_pass http://unified-api:8080;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    location /api/service1/ {
        auth_request /auth-service1;
        proxy_pass http://service1-api:8081;
    }
}
````

#### 6.1.2 ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨

```java
// í†µí•© ë³´ì•ˆ ì„¤ì •
@Configuration
@EnableWebSecurity
public class UnifiedSecurityConfig {

    @Bean
    public SecurityFilterChain unifiedFilterChain(HttpSecurity http) throws Exception {
        return http
            .securityMatcher("/api/unified/**")
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/api/unified/auth/**").permitAll()
                .requestMatchers("/api/unified/admin/**").hasRole("SUPER_ADMIN")
                .requestMatchers("/api/unified/**").hasAnyRole("SUPER_ADMIN", "SERVICE_ADMIN")
                .anyRequest().authenticated()
            )
            .oauth2ResourceServer(oauth2 -> oauth2.jwt(withDefaults()))
            .build();
    }
}

// ì„œë¹„ìŠ¤ë³„ ë³´ì•ˆ ì„¤ì •
@Component
public class ServiceSecurityManager {

    public boolean hasServicePermission(String adminId, String serviceCode, String module, String action) {
        // í†µí•© DBì—ì„œ ê¶Œí•œ ì¡°íšŒ
        AdminServicePermission permission = permissionRepository
            .findByAdminIdAndServiceCode(adminId, serviceCode);

        if (permission == null) return false;

        Map<String, List<String>> permissions = permission.getPermissions();
        List<String> modulePermissions = permissions.get(module);

        return modulePermissions != null && modulePermissions.contains(action);
    }
}
```

### 6.2 ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ ì œì–´

#### 6.2.1 ì•”í˜¸í™”ëœ ì—°ê²° ì •ë³´ ê´€ë¦¬

```java
@Service
public class DatabaseConnectionService {

    @Autowired
    private EncryptionService encryptionService;

    public DataSource getServiceDataSource(String serviceCode) {
        Service service = serviceRepository.findByServiceCode(serviceCode);

        // ì•”í˜¸í™”ëœ ì—°ê²° ì •ë³´ ë³µí˜¸í™”
        String decryptedConnectionInfo = encryptionService.decrypt(service.getDbConnectionInfo());
        DatabaseConnectionInfo dbInfo = JsonUtils.fromJson(decryptedConnectionInfo, DatabaseConnectionInfo.class);

        // ë™ì  DataSource ìƒì„±
        HikariConfig config = new HikariConfig();
        config.setJdbcUrl(dbInfo.getJdbcUrl());
        config.setUsername(dbInfo.getUsername());
        config.setPassword(dbInfo.getPassword());
        config.setMaximumPoolSize(5); // ì„œë¹„ìŠ¤ë³„ ì œí•œ

        return new HikariDataSource(config);
    }
}
```

#### 6.2.2 ê³„ì •ë³„ ê¶Œí•œ ë¶„ë¦¬

```sql
-- ì„œë¹„ìŠ¤ë³„ ë°ì´í„°ë² ì´ìŠ¤ ê³„ì • ìƒì„±
CREATE USER 'service1_readonly'@'%' IDENTIFIED BY 'secure_password1';
CREATE USER 'service1_admin'@'%' IDENTIFIED BY 'secure_password2';

-- ì½ê¸° ì „ìš© ê¶Œí•œ
GRANT SELECT ON service1_db.* TO 'service1_readonly'@'%';

-- ê´€ë¦¬ì ê¶Œí•œ (CRUD)
GRANT SELECT, INSERT, UPDATE, DELETE ON service1_db.* TO 'service1_admin'@'%';

-- ì„œë¹„ìŠ¤ ê°„ ì ‘ê·¼ ì°¨ë‹¨
REVOKE ALL ON service2_db.* FROM 'service1_readonly'@'%';
REVOKE ALL ON service2_db.* FROM 'service1_admin'@'%';
```

---

## 7. êµ¬í˜„ ë¡œë“œë§µ

### 7.1 Phase 1: ê¸°ë°˜ êµ¬ì¡° êµ¬ì¶• (4ì£¼)

1. **í†µí•© ë©”íƒ€ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ë° êµ¬ì¶•**

   - ì„œë¹„ìŠ¤ ë“±ë¡ í…Œì´ë¸”
   - ê´€ë¦¬ì ê¶Œí•œ ê´€ë¦¬ í…Œì´ë¸”
   - ì•”í˜¸í™” ì‹œìŠ¤í…œ êµ¬í˜„

2. **API Gateway êµ¬í˜„**

   - Spring Cloud Gateway ì„¤ì •
   - ë¼ìš°íŒ… ê·œì¹™ ì •ì˜
   - ì¸ì¦/ì¸ê°€ í•„í„° êµ¬í˜„

3. **ê¸°ë³¸ í†µí•© API êµ¬í˜„**
   - ì„œë¹„ìŠ¤ ë“±ë¡/ê´€ë¦¬ API
   - ê´€ë¦¬ì ì¸ì¦/ê¶Œí•œ API
   - í—¬ìŠ¤ì²´í¬ API

### 7.2 Phase 2: í†µí•© ê´€ë¦¬ ê¸°ëŠ¥ êµ¬í˜„ (6ì£¼)

1. **í†µí•© í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„**

   - í†µí•© ëŒ€ì‹œë³´ë“œ
   - ì„œë¹„ìŠ¤ ê´€ë¦¬ í™”ë©´
   - ê´€ë¦¬ì ê¶Œí•œ ê´€ë¦¬ í™”ë©´

2. **í†µí•© ì»¨í…ì¸  ê´€ë¦¬**

   - ê²Œì‹œê¸€ ì¼ê´„ ê´€ë¦¬
   - íŒì—… í†µí•© ê´€ë¦¬
   - ë©”ë‰´ í†µí•© ê´€ë¦¬

3. **ê¶Œí•œ ê´€ë¦¬ ì‹œìŠ¤í…œ**
   - ì„¸ë¶„í™”ëœ ê¶Œí•œ ì œì–´
   - ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤ UI
   - í™œë™ ë¡œê·¸ ì‹œìŠ¤í…œ

### 7.3 Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ ë° ìµœì í™” (4ì£¼)

1. **ì„±ëŠ¥ ìµœì í™”**

   - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ ìµœì í™”
   - ìºì‹± ì‹œìŠ¤í…œ ë„ì… (Redis)
   - ë¹„ë™ê¸° ì²˜ë¦¬ ê°œì„ 

2. **ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼**

   - ì„œë¹„ìŠ¤ í—¬ìŠ¤ì²´í¬ ìë™í™”
   - ì¥ì•  ê°ì§€ ë° ì•Œë¦¼
   - ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘

3. **ë³´ì•ˆ ê°•í™”**
   - 2FA ì¸ì¦ ë„ì…
   - ê°ì‚¬ ë¡œê·¸ ê°•í™”
   - ì¹¨ì… íƒì§€ ì‹œìŠ¤í…œ

---

## 8. ê¸°ì¡´ ì½”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

### 8.1 ë°±ì—”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜

#### 8.1.1 ê¸°ì¡´ Controller ìˆ˜ì •

```java
// ê¸°ì¡´ ì½”ë“œ
@RestController
@RequestMapping("/cms/content")
public class ContentController {
    // ...
}

// ìˆ˜ì •ëœ ì½”ë“œ
@RestController
@RequestMapping("/api/{serviceCode}/content")
public class ServiceContentController {

    @Autowired
    private ServiceSecurityManager securityManager;

    @Autowired
    private DynamicDataSourceService dataSourceService;

    @GetMapping
    public ResponseEntity<Page<ContentDto>> getContents(
            @PathVariable String serviceCode,
            Pageable pageable,
            Authentication auth) {

        // ê¶Œí•œ ì²´í¬
        if (!securityManager.hasServicePermission(auth.getName(), serviceCode, "content", "read")) {
            throw new AccessDeniedException("No permission for this service");
        }

        // ë™ì  ë°ì´í„°ì†ŒìŠ¤ ì„¤ì •
        try (DataSourceContext context = dataSourceService.setDataSource(serviceCode)) {
            Page<ContentDto> contents = contentService.getContents(pageable);
            return ResponseEntity.ok(contents);
        }
    }
}
```

#### 8.1.2 ë™ì  ë°ì´í„°ì†ŒìŠ¤ êµ¬í˜„

```java
@Component
public class DynamicDataSourceService {

    private final Map<String, DataSource> dataSourceCache = new ConcurrentHashMap<>();

    public DataSourceContext setDataSource(String serviceCode) {
        DataSource dataSource = getOrCreateDataSource(serviceCode);
        DataSourceContextHolder.setDataSource(dataSource);
        return new DataSourceContext();
    }

    private DataSource getOrCreateDataSource(String serviceCode) {
        return dataSourceCache.computeIfAbsent(serviceCode, this::createDataSource);
    }

    // DataSourceContext - try-with-resources ì§€ì›
    public static class DataSourceContext implements AutoCloseable {
        @Override
        public void close() {
            DataSourceContextHolder.clearDataSource();
        }
    }
}
```

### 8.2 í”„ë¡ íŠ¸ì—”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜

#### 8.2.1 API í´ë¼ì´ì–¸íŠ¸ ìˆ˜ì •

```typescript
// ê¸°ì¡´ API í´ë¼ì´ì–¸íŠ¸
const contentApi = {
  getContents: () => axios.get("/cms/content"),
  createContent: (data) => axios.post("/cms/content", data),
};

// ìˆ˜ì •ëœ API í´ë¼ì´ì–¸íŠ¸
const createServiceApi = (serviceCode: string) => ({
  content: {
    getContents: () => axios.get(`/api/${serviceCode}/content`),
    createContent: (data) => axios.post(`/api/${serviceCode}/content`, data),
  },
  board: {
    getArticles: () => axios.get(`/api/${serviceCode}/board/articles`),
    createArticle: (data) =>
      axios.post(`/api/${serviceCode}/board/articles`, data),
  },
});

// ì„œë¹„ìŠ¤ë³„ API ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
export const service1Api = createServiceApi("service1");
export const service2Api = createServiceApi("service2");

// í†µí•© API
export const unifiedApi = {
  services: {
    getAll: () => axios.get("/api/unified/services"),
    create: (data) => axios.post("/api/unified/services", data),
  },
  content: {
    getUnified: () => axios.get("/api/unified/content"),
    bulkAction: (action, ids) =>
      axios.post("/api/unified/content/bulk-action", { action, ids }),
  },
};
```

#### 8.2.2 ê¶Œí•œ ê¸°ë°˜ UI ë Œë”ë§

```typescript
// ê¶Œí•œ ê¸°ë°˜ ì»´í¬ë„ŒíŠ¸
interface ServicePermissionProps {
  serviceCode: string;
  module: string;
  action: string;
  children: React.ReactNode;
}

export function ServicePermission({
  serviceCode,
  module,
  action,
  children,
}: ServicePermissionProps) {
  const { permissions } = useAuth();

  const hasPermission = permissions
    ?.find((p) => p.serviceCode === serviceCode)
    ?.modules[module]?.includes(action);

  if (!hasPermission) return null;

  return <>{children}</>;
}

// ì‚¬ìš© ì˜ˆì‹œ
<ServicePermission serviceCode="service1" module="content" action="write">
  <Button onClick={handleCreateContent}>ìƒˆ ì»¨í…ì¸  ì‘ì„±</Button>
</ServicePermission>;
```

---

## 9. ê²°ë¡ 

ì´ í†µí•© CMS ê³ ë„í™” ì•„í‚¤í…ì²˜ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í•µì‹¬ ê°€ì¹˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤:

1. **í™•ì¥ì„±**: ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì¶”ê°€ ì‹œ ìµœì†Œí•œì˜ ìˆ˜ì •
2. **ë³´ì•ˆì„±**: ë‹¤ì¤‘ ë ˆë²¨ ë³´ì•ˆ ë° ì„œë¹„ìŠ¤ë³„ ê²©ë¦¬
3. **ìœ ì—°ì„±**: ì˜¨í”„ë ˆë¯¸ìŠ¤/í´ë¼ìš°ë“œ ë‹¤ì–‘í•œ ë°°í¬ í™˜ê²½ ì§€ì›
4. **ê´€ë¦¬íš¨ìœ¨ì„±**: í†µí•© ê´€ë¦¬ í™”ë©´ì„ í†µí•œ ìš´ì˜ íš¨ìœ¨ ê·¹ëŒ€í™”
5. **ê¸°ì¡´ í˜¸í™˜ì„±**: ê¸°ì¡´ CMS ê¸°ëŠ¥ì˜ ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ ì§€ì›

ì´ ì„¤ê³„ë¥¼ í†µí•´ ê¸°ì¡´ CMSì˜ ì¥ì ì„ ìœ ì§€í•˜ë©´ì„œë„, ë‹¤ì¤‘ ì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œì˜ í†µí•© ê´€ë¦¬ê°€ ê°€ëŠ¥í•œ ì°¨ì„¸ëŒ€ CMS í”Œë«í¼ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
